import{a as $}from"./chunk-YS2LZPPF.js";import"./chunk-5CUEJ4WU.js";import{f as U,l as B}from"./chunk-ZUEPVTI3.js";import{$a as g,Eb as T,Gb as z,Ia as s,Ib as A,J as O,Jb as V,Kb as R,La as r,Lb as N,Oa as i,Pa as n,Qa as S,Ta as _,U as x,Ua as v,Va as l,Y as M,Za as y,_a as a,ab as c,db as k,ea as b,fa as u,fb as C,ga as E,gb as w,hb as h,ib as D,j as I,q as P,xa as o}from"./chunk-H3YE5RTM.js";function j(t,d){if(t&1&&(i(0,"span",26),a(1),n()),t&2){let e=l().ngIf;o(),c("(",e.talla,")")}}function F(t,d){if(t&1&&(i(0,"div",27),a(1," RELLENO: "),i(2,"strong"),a(3),n()()),t&2){let e=l().ngIf;o(3),g(e.relleno)}}function H(t,d){if(t&1&&(i(0,"div",14)(1,"label"),a(2,"Atendido por"),n(),i(3,"div",15)(4,"span",28),E(),i(5,"svg",29),S(6,"path",30)(7,"circle",31),n(),a(8),n()()()),t&2){let e=l().ngIf;o(8),c(" ",e.vendedor," ")}}function q(t,d){if(t&1&&(i(0,"div",32)(1,"label"),a(2,"Instrucciones de Obrador"),n(),i(3,"p"),a(4),n()()),t&2){let e=l().ngIf;o(4),g(e.notasPastelero)}}function G(t,d){if(t&1&&(i(0,"div",33)(1,"label"),a(2,"Comentario de Tienda"),n(),i(3,"p"),a(4),n()()),t&2){let e=l().ngIf;o(4),g(e.notasTienda)}}function Y(t,d){if(t&1){let e=_();i(0,"button",34),v("click",function(){b(e);let m=l().ngIf,f=l();return u(f.updateStatus(m.id,"En Proceso"))}),a(1),n()}if(t&2){let e=l(2);r("disabled",e.isUpdating),o(),c(" ",e.isUpdating?"Actualizando...":"COMENZAR PRODUCCI\xD3N"," ")}}function Z(t,d){if(t&1){let e=_();i(0,"button",35),v("click",function(){b(e);let m=l().ngIf,f=l();return u(f.updateStatus(m.id,"Producido"))}),a(1),n()}if(t&2){let e=l(2);r("disabled",e.isUpdating),o(),c(" ",e.isUpdating?"Actualizando...":"TERMINAR Y LISTO PARA TIENDA"," ")}}function J(t,d){t&1&&(i(0,"div",36),a(1," Pedido finalizado por obrador \u2713 "),n())}function K(t,d){if(t&1&&(i(0,"div",5)(1,"div",6)(2,"div",7),a(3),n(),i(4,"div",8)(5,"div",9),a(6),n(),i(7,"div",10),a(8),s(9,j,2,1,"span",11),n(),s(10,F,4,1,"div",12),n(),i(11,"div",13)(12,"div",14)(13,"label"),a(14,"Cliente"),n(),i(15,"div",15),a(16),n()(),i(17,"div",14)(18,"label"),a(19,"Hora de Entrega"),n(),i(20,"div",16),a(21),C(22,"date"),n()(),s(23,H,9,1,"div",17),n(),i(24,"div",18),s(25,q,5,1,"div",19)(26,G,5,1,"div",20),n(),i(27,"div",21),s(28,Y,2,2,"button",22)(29,Z,2,2,"button",23)(30,J,2,0,"div",24),n(),i(31,"div",25)(32,"small"),a(33),n(),i(34,"small"),a(35),C(36,"date"),n()()()()),t&2){let e=d.ngIf;o(2),r("ngClass",e.estado.toLowerCase().replace(" ","-")),o(),c(" Estado Actual: ",e.estado," "),o(3),c("",e.cantidad,"u."),o(2),c(" ",e.producto," "),o(),r("ngIf",e.talla),o(),r("ngIf",e.relleno),o(6),g(e.nombreCliente||"-"),o(5),g(h(22,16,e.fechaEntrega,"HH:mm")),o(2),r("ngIf",e.vendedor),o(2),r("ngIf",e.notasPastelero),o(),r("ngIf",e.notasTienda),o(2),r("ngIf",e.estado==="Pendiente"),o(),r("ngIf",e.estado==="En Proceso"),o(),r("ngIf",e.estado==="Producido"||e.estado==="Entregado"),o(3),c("ID: ",e.id,""),o(2),c("Entrega: ",h(36,19,e.fechaEntrega,"dd/MM/yyyy"),"")}}function Q(t,d){t&1&&(i(0,"div",37),a(1,"Cargando datos de producci\xF3n..."),n())}var L=class t{route=x(U);location=x(T);productionService=x($);refresh$=new I(void 0);pedido$;isUpdating=!1;ngOnInit(){this.pedido$=this.refresh$.pipe(O(()=>this.route.paramMap),P(d=>d.get("id")),O(d=>d?this.productionService.getPedidos().pipe(P(e=>e.find(p=>p.id===d))):[void 0]))}updateStatus(d,e){this.isUpdating=!0,this.productionService.updatePedidoStatus(d,e).subscribe({next:()=>{this.isUpdating=!1,this.refresh$.next()},error:p=>{alert(p.message),this.isUpdating=!1}})}goBack(){this.location.back()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=M({type:t,selectors:[["app-pedido-obrador-detail"]],standalone:!0,features:[k],decls:10,vars:4,consts:[["loading",""],[1,"detail-container"],[1,"header"],[1,"btn-back",3,"click"],["class","content",4,"ngIf","ngIfElse"],[1,"content"],[1,"card"],[1,"status-banner",3,"ngClass"],[1,"main-info"],[1,"qty"],[1,"product"],["class","talla-text",4,"ngIf"],["class","relleno-box",4,"ngIf"],[1,"info-grid"],[1,"info-group"],[1,"value"],[1,"value","highlight"],["class","info-group",4,"ngIf"],[1,"notes-section"],["class","note-box pastelero",4,"ngIf"],["class","note-box tienda",4,"ngIf"],[1,"production-actions"],["class","btn-action start",3,"disabled","click",4,"ngIf"],["class","btn-action finish",3,"disabled","click",4,"ngIf"],["class","done-message",4,"ngIf"],[1,"metadata"],[1,"talla-text"],[1,"relleno-box"],[1,"vendedor-badge"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"note-box","pastelero"],[1,"note-box","tienda"],[1,"btn-action","start",3,"click","disabled"],[1,"btn-action","finish",3,"click","disabled"],[1,"done-message"],[1,"loading-state"]],template:function(e,p){if(e&1){let m=_();i(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return b(m),u(p.goBack())}),a(3,"\u2190 Volver a Obrador"),n(),i(4,"h2"),a(5,"Control de Producci\xF3n"),n()(),s(6,K,37,22,"div",4),C(7,"async"),s(8,Q,2,0,"ng-template",null,0,D),n()}if(e&2){let m=y(9);o(6),r("ngIf",w(7,2,p.pedido$))("ngIfElse",m)}},dependencies:[N,z,A,V,R,B],styles:[".detail-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;margin-bottom:2rem}.btn-back[_ngcontent-%COMP%]{background:#34495e;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:600}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000001a;border-top:5px solid #d35400}.status-banner[_ngcontent-%COMP%]{padding:.8rem;text-align:center;font-weight:700;background:#f8f9fa;border-bottom:1px solid #eee}.status-banner.pendiente[_ngcontent-%COMP%]{color:#856404}.status-banner.en-proceso[_ngcontent-%COMP%]{color:#004085}.status-banner.producido[_ngcontent-%COMP%]{color:#155724}.main-info[_ngcontent-%COMP%]{padding:2rem;text-align:center;background:#fffcf9}.qty[_ngcontent-%COMP%]{font-size:3rem;font-weight:900;color:#d35400;line-height:1}.product[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-top:.5rem}.talla-text[_ngcontent-%COMP%]{color:#e67e22;font-size:1.5rem;margin-left:10px}.relleno-box[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.2rem;color:#e67e22;background:#fff3e0;padding:.75rem 1.5rem;border-radius:8px;display:inline-block;border:2px solid #ffeaa7;font-weight:500}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;padding:1.5rem 2rem;border-top:1px solid #eee}.info-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#7f8c8d;text-transform:uppercase;font-weight:700;margin-bottom:.3rem}.vendedor-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background:#f0fdf4;color:#166534;padding:4px 10px;border-radius:6px;font-size:.9rem;font-weight:500}.vendedor-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#22c55e}.value[_ngcontent-%COMP%]{font-size:1.1rem;color:#2c3e50;font-weight:600}.highlight[_ngcontent-%COMP%]{font-size:1.4rem;color:#e74c3c}.notes-section[_ngcontent-%COMP%]{padding:0 2rem 1.5rem;display:flex;flex-direction:column;gap:1rem}.note-box[_ngcontent-%COMP%]{padding:1.2rem;border-radius:8px}.note-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase;margin-bottom:.5rem;display:block;opacity:.8}.note-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;line-height:1.4;font-weight:500}.note-box.pastelero[_ngcontent-%COMP%]{background:#fff9c4;color:#856404;border:1px dashed #fbc02d}.note-box.tienda[_ngcontent-%COMP%]{background:#f0f2f5;color:#555}.production-actions[_ngcontent-%COMP%]{padding:2rem;background:#fdfdfd;border-top:1px solid #eee}.btn-action[_ngcontent-%COMP%]{width:100%;padding:18px;border-radius:10px;border:none;font-weight:900;font-size:1.2rem;cursor:pointer;text-transform:uppercase;letter-spacing:1px;transition:transform .1s}.btn-action[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-action.start[_ngcontent-%COMP%]{background:#3498db;color:#fff;display:flex;align-items:center;justify-content:center;gap:10px}.btn-action.finish[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.btn-action[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed}.done-message[_ngcontent-%COMP%]{text-align:center;color:#27ae60;font-weight:700;font-size:1.2rem;padding:1rem}.metadata[_ngcontent-%COMP%]{padding:1rem 2rem;background:#f8f9fa;border-top:1px solid #eee;display:flex;justify-content:space-between;color:#95a5a6;font-size:.8rem}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:4rem;color:#666}"]})};export{L as PedidoObradorDetailComponent};
