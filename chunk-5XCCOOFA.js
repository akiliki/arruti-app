import{a as m,b as f}from"./chunk-EPLH7U5S.js";import{a,b as i,g as p,h as c,k as d,q as s,ra as u,sa as l,t as n}from"./chunk-3J4ERITL.js";var h=class o{http=n(l);adapter=n(m);apiUrl=f.apiUrl;getProductos(){return this.http.get(`${this.apiUrl}?type=productos`).pipe(c(r=>{if(r.status==="error")throw new Error(r.message||"Error al cargar los productos.");return this.adapter.adaptProductos(r)}),d(r=>(console.error("Error fetching productos:",r),p(()=>new Error("No se pudieron cargar los productos.")))))}addProducto(r){let e=i(a({},r),{id:crypto.randomUUID()}),P=i(a({},this.adapter.prepareProductoForPost(e)),{action:"addProduct"}),g=new u({"Content-Type":"text/plain;charset=utf-8"});return this.http.post(this.apiUrl,JSON.stringify(P),{headers:g}).pipe(c(t=>{if(t.status==="error")throw new Error(t.message||"Error al a\xF1adir el producto.");return t}),d(t=>(console.error("Error adding producto:",t),p(()=>new Error("No se pudo a\xF1adir el producto.")))))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=s({token:o,factory:o.\u0275fac,providedIn:"root"})};export{h as a};
