import{a as A}from"./chunk-T6BMFCRC.js";import"./chunk-ORCUSZZD.js";import{Aa as $,Da as j,F as d,K as l,M as c,N as M,O,P as o,Q as n,U as S,V as h,W as s,X as E,Y as i,Z as g,_ as u,ba as I,da as b,ea as k,f,fa as y,ga as w,h as x,k as _,na as U,oa as T,pa as F,qa as N,ra as D,sa as L,t as m,u as C,xa as R,y as v,z as P,za as V}from"./chunk-ALWVHIEC.js";function G(e,a){if(e&1){let t=S();o(0,"button",12),h("click",function(){let p=v(t).$implicit,z=s().ngIf,q=s();return P(q.updateStatus(z.id,p))}),i(1),n()}if(e&2){let t=a.$implicit,r=s().ngIf,p=s();O("btn-status "+t.toLowerCase().replace(" ","-")),M("active",r.estado===t),c("disabled",p.updating||r.estado===t),d(),u(" ",t," ")}}function H(e,a){if(e&1&&(o(0,"div",13),i(1),n()),e&2){let t=s(2);d(),u(" ",t.errorMessage," ")}}function J(e,a){if(e&1&&(o(0,"div",2)(1,"div",3)(2,"button",4),i(3,"\u2190 Volver"),n(),o(4,"h2"),i(5),n()(),o(6,"div",5)(7,"div",6)(8,"label"),i(9,"Producto:"),n(),o(10,"span"),i(11),n()(),o(12,"div",6)(13,"label"),i(14,"Cantidad:"),n(),o(15,"span"),i(16),n()(),o(17,"div",6)(18,"label"),i(19,"Fecha de Entrega:"),n(),o(20,"span"),i(21),b(22,"date"),n()(),o(23,"div",6)(24,"label"),i(25,"Estado Actual:"),n(),o(26,"span",7),i(27),n()()(),o(28,"div",8)(29,"h3"),i(30,"Cambiar Estado a:"),n(),o(31,"div",9),l(32,G,2,6,"button",10),n()(),l(33,H,2,1,"div",11),n()),e&2){let t=a.ngIf,r=s();d(5),u("Pedido: ",t.id,""),d(6),g(t.producto),d(5),g(t.cantidad),d(5),g(y(22,8,t.fechaEntrega,"dd/MM/yyyy")),d(5),c("ngClass",t.estado.toLowerCase().replace(" ","-")),d(),u(" ",t.estado," "),d(5),c("ngForOf",r.estados),d(),c("ngIf",r.errorMessage)}}function K(e,a){e&1&&(o(0,"div",16),i(1,"Cargando pedido..."),n())}function Q(e,a){if(e&1&&(o(0,"div",17)(1,"p"),i(2),n(),o(3,"button",18),i(4,"Volver a la lista"),n()()),e&2){let t=s(2);d(2),g(t.error)}}function W(e,a){if(e&1&&l(0,K,2,0,"div",14)(1,Q,5,1,"div",15),e&2){let t=s();c("ngIf",!t.error),d(),c("ngIf",t.error)}}var B=class e{route=m(R);router=m(V);productionService=m(A);pedido$;estados=["Pendiente","En Proceso","Producido","Entregado"];updating=!1;error=null;errorMessage=null;ngOnInit(){let a=this.route.snapshot.paramMap.get("id");if(!a){this.error="No se proporcion\xF3 un ID de pedido.";return}this.pedido$=this.productionService.getPedidos().pipe(x(t=>{let r=t.find(p=>p.id===a);if(!r)throw new Error("Pedido no encontrado.");return r}),_(t=>(this.error=t.message,f())))}updateStatus(a,t){this.updating=!0,this.errorMessage=null,this.productionService.updatePedidoStatus(a,t).subscribe({next:()=>{this.updating=!1,this.router.navigate(["/pedidos"])},error:r=>{this.errorMessage=r.message,this.updating=!1}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=C({type:e,selectors:[["app-update-status"]],standalone:!0,features:[I],decls:4,vars:4,consts:[["loading",""],["class","status-container",4,"ngIf","ngIfElse"],[1,"status-container"],[1,"header"],["routerLink","/pedidos",1,"btn-back"],[1,"order-card"],[1,"detail"],[1,"badge",3,"ngClass"],[1,"status-actions"],[1,"btn-group"],[3,"class","active","disabled","click",4,"ngFor","ngForOf"],["class","error-alert",4,"ngIf"],[3,"click","disabled"],[1,"error-alert"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"loading-state"],[1,"error-state"],["routerLink","/pedidos"]],template:function(t,r){if(t&1&&(l(0,J,34,11,"div",1),b(1,"async"),l(2,W,2,2,"ng-template",null,0,w)),t&2){let p=E(3);c("ngIf",k(1,2,r.pedido$))("ngIfElse",p)}},dependencies:[L,U,T,F,N,D,j,$],styles:[".status-container[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:20px}.btn-back[_ngcontent-%COMP%]{background:none;border:none;color:#d35400;cursor:pointer;font-weight:700}.order-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-radius:8px;padding:20px;margin-bottom:30px;box-shadow:0 2px 4px #0000000d}.detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee}.detail[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#666}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:.9rem;font-weight:700}.badge.pendiente[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.en-proceso[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.badge.producido[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.entregado[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.status-actions[_ngcontent-%COMP%]{text-align:center}.btn-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin-top:15px}.btn-status[_ngcontent-%COMP%]{padding:12px 20px;border-radius:6px;border:2px solid transparent;cursor:pointer;font-weight:700;transition:all .2s}.btn-status.pendiente[_ngcontent-%COMP%]{border-color:#ffe69c;color:#856404}.btn-status.pendiente[_ngcontent-%COMP%]:hover:not(:disabled){background:#fff3cd}.btn-status.pendiente.active[_ngcontent-%COMP%]{background:#fff3cd;border-color:#856404}.btn-status.en-proceso[_ngcontent-%COMP%]{border-color:#b8daff;color:#004085}.btn-status.en-proceso[_ngcontent-%COMP%]:hover:not(:disabled){background:#cce5ff}.btn-status.en-proceso.active[_ngcontent-%COMP%]{background:#cce5ff;border-color:#004085}.btn-status.producido[_ngcontent-%COMP%]{border-color:#c3e6cb;color:#155724}.btn-status.producido[_ngcontent-%COMP%]:hover:not(:disabled){background:#d4edda}.btn-status.producido.active[_ngcontent-%COMP%]{background:#d4edda;border-color:#155724}.btn-status.entregado[_ngcontent-%COMP%]{border-color:#d6d8db;color:#383d41}.btn-status.entregado[_ngcontent-%COMP%]:hover:not(:disabled){background:#e2e3e5}.btn-status.entregado.active[_ngcontent-%COMP%]{background:#e2e3e5;border-color:#383d41}.btn-status[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{padding:40px;text-align:center}.error-alert[_ngcontent-%COMP%]{margin-top:20px;padding:15px;background:#f8d7da;color:#721c24;border-radius:4px;text-align:center}"]})};export{B as UpdateStatusComponent};
