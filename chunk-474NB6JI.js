import{Aa as M,Ba as w,Ca as k,Da as F,E as _,J as l,O as d,Q as P,Sa as z,Ta as A,Ua as H,X as C,Y as S,Ya as j,ja as i,k as v,l as h,o as c,oa as b,pa as s,qa as a,ra as r,sa as E,ta as I,u as p,ua as y,va as O,wa as D,xa as m,ya as o,za as f}from"./chunk-4UXY6HIK.js";var g=class n{adaptPedidos(e){return e.data.map(t=>({id:t.id,producto:t.producto,cantidad:t.cantidad,fechaEntrega:new Date(t.fecha),estado:this.mapEstado(t.estado_actual)}))}adaptStats(e){return{totalPendientes:e.stats.pendientes,enHorno:e.stats.horno,finalizadosHoy:e.stats.finalizados}}mapEstado(e){switch(e){case"Pendiente":return"Pendiente";case"En Proceso":return"En Proceso";case"Finalizado":return"Finalizado";default:return"Pendiente"}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};var R={production:!1,apiUrl:"https://script.google.com/macros/s/PLACEHOLDER/exec"};var u=class n{http=d(j);adapter=d(g);apiUrl=R.apiUrl;getDashboardStats(){return this.http.get(this.apiUrl).pipe(c(e=>this.adapter.adaptStats(e)),p(e=>(console.error("Error fetching production stats:",e),h(()=>new Error("No se pudo cargar la informaci\xF3n de producci\xF3n. Por favor, int\xE9ntelo de nuevo m\xE1s tarde.")))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};function V(n,e){n&1&&(a(0,"div",5),E(1,"div",6),a(2,"p"),o(3,"Cargando datos de producci\xF3n..."),r()())}function $(n,e){if(n&1){let t=O();a(0,"div",7),o(1),a(2,"button",8),D("click",function(){C(t);let U=m(2);return S(U.loadStats())}),o(3,"Reintentar"),r()()}if(n&2){let t=m().ngIf;i(),M(" ",t.error," ")}}function L(n,e){if(n&1&&(a(0,"div",9)(1,"div",10)(2,"h3"),o(3,"Pendientes"),r(),a(4,"p",11),o(5),r()(),a(6,"div",10)(7,"h3"),o(8,"En Horno"),r(),a(9,"p",11),o(10),r()(),a(11,"div",10)(12,"h3"),o(13,"Finalizados Hoy"),r(),a(14,"p",11),o(15),r()()()),n&2){let t=m().ngIf;i(5),f(t.data.totalPendientes),i(5),f(t.data.enHorno),i(5),f(t.data.finalizadosHoy)}}function B(n,e){if(n&1&&(I(0),b(1,V,4,0,"div",2)(2,$,4,1,"div",3)(3,L,16,3,"div",4),y()),n&2){let t=e.ngIf;i(),s("ngIf",t.loading),i(),s("ngIf",t.error),i(),s("ngIf",t.data)}}var N=class n{productionService=d(u);state$;ngOnInit(){this.loadStats()}loadStats(){this.state$=this.productionService.getDashboardStats().pipe(c(e=>({loading:!1,data:e,error:null})),_({loading:!0,data:null,error:null}),p(e=>v({loading:!1,data:null,error:e.message})))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[w],decls:5,vars:3,consts:[[1,"dashboard-container"],[4,"ngIf"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","stats-grid",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"error-state"],[3,"click"],[1,"stats-grid"],[1,"stat-card"],[1,"value"]],template:function(t,x){t&1&&(a(0,"div",0)(1,"h1"),o(2,"Panel de Producci\xF3n - Pasteler\xEDa Arruti"),r(),b(3,B,4,3,"ng-container",1),k(4,"async"),r()),t&2&&(i(3),s("ngIf",F(4,1,x.state$)))},dependencies:[H,z,A],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;font-family:sans-serif}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-top:20px}.stat-card[_ngcontent-%COMP%]{border:1px solid #ddd;padding:15px;border-radius:8px;text-align:center;background:#fff}.value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#d35400}.loading-state[_ngcontent-%COMP%]{padding:40px;text-align:center;color:#666}.spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid #d35400;border-radius:50%;width:30px;height:30px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 10px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-state[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#721c24;background-color:#f8d7da;border-radius:8px;border:1px solid #f5c6cb;margin-top:20px}button[_ngcontent-%COMP%]{margin-top:10px;padding:8px 16px;cursor:pointer;background:#d35400;color:#fff;border:none;border-radius:4px}button[_ngcontent-%COMP%]:hover{background:#e67e22}"]})};export{N as DashboardComponent};
