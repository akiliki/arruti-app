import{a as $}from"./chunk-ICGIS32O.js";import"./chunk-RILC2ZGZ.js";import{f as N,l as U}from"./chunk-AHT2WOHS.js";import{$a as s,Eb as D,Gb as z,Ia as c,Ib as A,J as u,Jb as R,Kb as V,La as r,Lb as B,Oa as i,Pa as t,Qa as y,Ta as C,U as f,Ua as P,Va as l,Y as E,Za as S,_a as o,ab as p,db as T,ea as _,fa as b,fb as x,ga as O,gb as k,hb as h,ib as w,j as M,q as v,xa as a}from"./chunk-WPZFAPEJ.js";function H(n,d){if(n&1&&(i(0,"div",21),o(1),t()),n&2){let e=l().ngIf;a(),p("Raci\xF3n: ",e.talla,"")}}function j(n,d){if(n&1&&(i(0,"div",22),o(1,"Relleno de: "),i(2,"strong"),o(3),t()()),n&2){let e=l().ngIf;a(3),s(e.relleno)}}function G(n,d){if(n&1&&(i(0,"div",9)(1,"label"),o(2,"Atendido por"),t(),i(3,"div",11)(4,"span",23),O(),i(5,"svg",24),y(6,"path",25)(7,"circle",26),t(),o(8),t()()()),n&2){let e=l().ngIf;a(8),p(" ",e.vendedor," ")}}function L(n,d){if(n&1&&(i(0,"div",27)(1,"label"),o(2,"Notas de Tienda"),t(),i(3,"p"),o(4),t()()),n&2){let e=l().ngIf;a(4),s(e.notasTienda)}}function q(n,d){if(n&1&&(i(0,"div",28)(1,"label"),o(2,"Notas de Obrador"),t(),i(3,"p"),o(4),t()()),n&2){let e=l().ngIf;a(4),s(e.notasPastelero)}}function J(n,d){if(n&1){let e=C();i(0,"div",29)(1,"button",30),P("click",function(){_(e);let g=l().ngIf,I=l();return b(I.markAsDelivered(g.id))}),o(2),t()()}if(n&2){let e=l(2);a(),r("disabled",e.isUpdating),a(),p(" ",e.isUpdating?"Procesando...":"ENTREGAR"," ")}}function K(n,d){n&1&&(i(0,"div",29)(1,"span",31),o(2,"Entregado correctamente \u2713"),t()())}function Q(n,d){if(n&1&&(i(0,"small"),o(1),x(2,"date"),t()),n&2){let e=l().ngIf;a(),p("\xDAltima actualizaci\xF3n: ",h(2,1,e.fechaActualizacion,"dd/MM/yyyy HH:mm"),"")}}function W(n,d){if(n&1&&(i(0,"div",5)(1,"div",6)(2,"div",7),o(3),t(),i(4,"div",8)(5,"div",9)(6,"label"),o(7,"Cliente"),t(),i(8,"div",10),o(9),t()(),i(10,"div",9)(11,"label"),o(12,"Producto"),t(),i(13,"div",11),o(14),t(),c(15,H,2,1,"div",12)(16,j,4,1,"div",13),t(),i(17,"div",9)(18,"label"),o(19,"Cantidad"),t(),i(20,"div",11),o(21),t()(),i(22,"div",9)(23,"label"),o(24,"Fecha de Entrega"),t(),i(25,"div",11),o(26),x(27,"date"),t()(),c(28,G,9,1,"div",14),t(),i(29,"div",15),c(30,L,5,1,"div",16)(31,q,5,1,"div",17),t(),c(32,J,3,2,"div",18)(33,K,3,0,"div",18),i(34,"div",19)(35,"small"),o(36),t(),c(37,Q,3,4,"small",20),t()()()),n&2){let e=d.ngIf;a(2),r("ngClass",e.estado.toLowerCase().replace(" ","-")),a(),p(" Estado: ",e.estado," "),a(6),s(e.nombreCliente||"Sin nombre"),a(5),s(e.producto),a(),r("ngIf",e.talla),a(),r("ngIf",e.relleno),a(5),p("",e.cantidad," unidades"),a(5),s(h(27,15,e.fechaEntrega,"dd/MM/yyyy HH:mm")),a(2),r("ngIf",e.vendedor),a(2),r("ngIf",e.notasTienda),a(),r("ngIf",e.notasPastelero),a(),r("ngIf",e.estado!=="Entregado"),a(),r("ngIf",e.estado==="Entregado"),a(3),p("ID: ",e.id,""),a(),r("ngIf",e.fechaActualizacion)}}function X(n,d){n&1&&(i(0,"div",32),o(1,"Cargando detalle del pedido..."),t())}var F=class n{route=f(N);location=f(D);productionService=f($);refresh$=new M(void 0);pedido$;isUpdating=!1;ngOnInit(){this.pedido$=this.refresh$.pipe(u(()=>this.route.paramMap),v(d=>d.get("id")),u(d=>d?this.productionService.getPedidos().pipe(v(e=>e.find(m=>m.id===d))):[void 0]))}markAsDelivered(d){this.isUpdating=!0,this.productionService.updatePedidoStatus(d,"Entregado").subscribe({next:()=>{this.isUpdating=!1,this.refresh$.next()},error:e=>{alert(e.message),this.isUpdating=!1}})}goBack(){this.location.back()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=E({type:n,selectors:[["app-pedido-tienda-detail"]],standalone:!0,features:[T],decls:10,vars:4,consts:[["loading",""],[1,"detail-container"],[1,"header"],[1,"btn-back",3,"click"],["class","content",4,"ngIf","ngIfElse"],[1,"content"],[1,"card"],[1,"status-banner",3,"ngClass"],[1,"info-grid"],[1,"info-group"],[1,"value","highlight"],[1,"value"],["class","talla-badge-detail",4,"ngIf"],["class","relleno-detail",4,"ngIf"],["class","info-group",4,"ngIf"],[1,"notes-section"],["class","note-box tienda",4,"ngIf"],["class","note-box pastelero",4,"ngIf"],["class","actions",4,"ngIf"],[1,"metadata"],[4,"ngIf"],[1,"talla-badge-detail"],[1,"relleno-detail"],[1,"vendedor-badge"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"note-box","tienda"],[1,"note-box","pastelero"],[1,"actions"],[1,"btn-deliver",3,"click","disabled"],[1,"delivery-success"],[1,"loading-state"]],template:function(e,m){if(e&1){let g=C();i(0,"div",1)(1,"div",2)(2,"button",3),P("click",function(){return _(g),b(m.goBack())}),o(3,"\u2190 Volver a Tienda"),t(),i(4,"h2"),o(5,"Detalle del Pedido (Tienda)"),t()(),c(6,W,38,18,"div",4),x(7,"async"),c(8,X,2,0,"ng-template",null,0,w),t()}if(e&2){let g=S(9);a(6),r("ngIf",k(7,2,m.pedido$))("ngIfElse",g)}},dependencies:[B,z,A,R,V,U],styles:[".detail-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;margin-bottom:2rem}.btn-back[_ngcontent-%COMP%]{background:#eee;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:600}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000001a}.status-banner[_ngcontent-%COMP%]{padding:1rem;text-align:center;font-weight:700;text-transform:uppercase;font-size:1.1rem}.status-banner.pendiente[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-banner.en-proceso[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.status-banner.producido[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-banner.entregado[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;padding:2rem}.info-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#666;text-transform:uppercase;font-weight:700;margin-bottom:.5rem}.value[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}.talla-badge-detail[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.9rem;background:#f1f2f6;padding:4px 8px;border-radius:4px;display:inline-block;margin-right:8px;font-weight:600}.relleno-detail[_ngcontent-%COMP%]{margin-top:.5rem;font-size:1rem;color:#e67e22;background:#fff3e0;padding:.5rem;border-radius:6px;display:inline-block;border:1px solid #ffeaa7}.vendedor-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background:#f0fdf4;color:#166534;padding:4px 10px;border-radius:6px;font-size:1rem;font-weight:500}.vendedor-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#22c55e}.value.highlight[_ngcontent-%COMP%]{color:#d35400;font-weight:700;font-size:1.5rem}.notes-section[_ngcontent-%COMP%]{padding:0 2rem 2rem;display:flex;flex-direction:column;gap:1rem}.note-box[_ngcontent-%COMP%]{padding:1rem;border-radius:8px}.note-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:700;text-transform:uppercase;margin-bottom:.5rem;display:block}.note-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;line-height:1.4}.note-box.pastelero[_ngcontent-%COMP%]{background:#fffde7;border-left:5px solid #fbc02d;color:#856404}.note-box.tienda[_ngcontent-%COMP%]{background:#f0f9ff;border-left:5px solid #0ea5e9;color:#075985}.actions[_ngcontent-%COMP%]{padding:2rem;text-align:center;border-top:1px solid #eee}.btn-deliver[_ngcontent-%COMP%]{background:#27ae60;color:#fff;border:none;padding:15px 30px;border-radius:8px;font-weight:700;font-size:1.1rem;cursor:pointer;width:100%}.btn-deliver[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.delivery-success[_ngcontent-%COMP%]{color:#27ae60;font-weight:700;font-size:1.2rem}.metadata[_ngcontent-%COMP%]{padding:1rem 2rem;background:#f9f9f9;border-top:1px solid #eee;display:flex;justify-content:space-between;color:#999}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:4rem;color:#666}"]})};export{F as PedidoTiendaDetailComponent};
