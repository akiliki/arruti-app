import{a as _e}from"./chunk-2DOZQ56E.js";import{a as ue}from"./chunk-NAFMCCRU.js";import{a as J,b as K,c as S,d as X,e as ee,f as te,g as ne,h as ie,i as oe,j as re,k as ae,l as de,m as le,q as ce,r as se}from"./chunk-74UN4DIZ.js";import{a as me,b as pe}from"./chunk-BKTZ77TT.js";import{b as U,f as Q,h as Y,i as W,l as Z}from"./chunk-MLTMCV35.js";import{$a as c,B as G,Ea as A,Ib as H,Ja as _,Jb as j,Kb as q,Ma as m,Mb as B,Na as M,P as L,Pa as o,Qa as r,Ra as x,Sa as V,Ta as D,Ua as b,V as O,Va as u,Wa as l,Z as z,ab as h,bb as y,eb as R,fa as f,ga as v,gb as F,ha as P,hb as I,ia as E,j as N,m as $,q as w,ya as d}from"./chunk-ISGLS2OQ.js";var k=class i{http=O(U);adapter=O(me);apiUrl=pe.apiUrl;empleadosState=new N([]);empleadosSignal=A([]);loaded=!1;constructor(){this.empleadosState.subscribe(t=>this.empleadosSignal.set(t))}getEmpleados(){return this.loaded||this.refreshEmpleados().subscribe(),this.empleadosState.asObservable()}refreshEmpleados(){return this.http.get(`${this.apiUrl}?type=empleados`).pipe(w(t=>{if(t.status==="error")throw new Error(t.message);let e=this.adapter.adaptEmpleados(t);return this.empleadosState.next(e.filter(n=>n.activo)),this.loaded=!0,e}))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=L({token:i,factory:i.\u0275fac,providedIn:"root"})};function he(i,t){if(i&1){let e=b();o(0,"div",21),u("click",function(){let a,s=f(e).$implicit,p=l(2);return(a=p.pedidoForm.get("vendedor"))==null||a.setValue(s.nombre),v(p.saveVendedor(s.nombre))}),c(1),r()}if(i&2){let e,n=t.$implicit,a=l(2);M("active",((e=a.pedidoForm.get("vendedor"))==null?null:e.value)===n.nombre),d(),y(" ",n.nombre," ")}}function Ce(i,t){if(i&1&&(o(0,"div",17)(1,"div",18)(2,"label"),c(3,"\xBFQui\xE9n recoge el pedido? (Empleado)"),r(),o(4,"div",19),_(5,he,2,3,"div",20),F(6,"async"),r()()()),i&2){let e=l();d(5),m("ngForOf",I(6,1,e.empleados$))}}function Pe(i,t){if(i&1){let e=b();o(0,"div",22),u("click",function(){let a;f(e);let s=l();return v((a=s.pedidoForm.get("vendedor"))==null?null:a.setValue(""))}),c(1," Atendido por: "),o(2,"strong"),c(3),r(),o(4,"span",23),c(5,"(Cambiar)"),r()()}if(i&2){let e,n=l();d(3),h((e=n.pedidoForm.get("vendedor"))==null?null:e.value)}}function Me(i,t){i&1&&(o(0,"span",48),c(1,"YA EN TIENDA"),r())}function ye(i,t){if(i&1&&(o(0,"span"),c(1),r()),i&2){let e,n=l(2).$implicit;d(),y("Talla: ",(e=n.get("talla"))==null?null:e.value,"")}}function Oe(i,t){if(i&1&&(o(0,"span"),c(1),r()),i&2){let e,n=l(2).$implicit;d(),y("Relleno: ",(e=n.get("relleno"))==null?null:e.value,"")}}function Se(i,t){if(i&1&&(o(0,"span",49)(1,"strong"),c(2,"Obs:"),r(),c(3),r()),i&2){let e,n=l(2).$implicit;d(3),y(" ",(e=n.get("notasPastelero"))==null?null:e.value," ")}}function we(i,t){if(i&1){let e=b();o(0,"tr")(1,"td")(2,"div",35),c(3),r(),_(4,Me,2,0,"span",36),r(),o(5,"td")(6,"div",37),_(7,ye,2,1,"span",34)(8,Oe,2,1,"span",34)(9,Se,4,1,"span",38),r()(),o(10,"td",39),c(11),r(),o(12,"td",40)(13,"button",41),u("click",function(){f(e);let a=l().index,s=l(3);return v(s.editLine(a))}),P(),o(14,"svg",42),x(15,"path",43)(16,"path",44),r()(),E(),o(17,"button",45),u("click",function(){f(e);let a=l().index,s=l(3);return v(s.removeItem(a))}),P(),o(18,"svg",42),x(19,"polyline",46)(20,"path",47),r()()()()}if(i&2){let e,n,a,s,p,g,C=l().$implicit;d(3),h((e=C.get("productoNombre"))==null?null:e.value),d(),m("ngIf",(n=C.get("guardadoEnTienda"))==null?null:n.value),d(3),m("ngIf",(a=C.get("talla"))==null?null:a.value),d(),m("ngIf",(s=C.get("relleno"))==null?null:s.value),d(),m("ngIf",(p=C.get("notasPastelero"))==null?null:p.value),d(2),h((g=C.get("cantidad"))==null?null:g.value)}}function Ee(i,t){if(i&1&&(V(0),_(1,we,21,6,"tr",34),D()),i&2){let e=t.index,n=l(3);d(),m("ngIf",n.confirmedLines[e])}}function Fe(i,t){if(i&1&&(o(0,"div",31)(1,"table",32)(2,"thead")(3,"tr")(4,"th"),c(5,"Producto"),r(),o(6,"th"),c(7,"Detalles"),r(),o(8,"th"),c(9,"Cant."),r(),x(10,"th"),r()(),o(11,"tbody"),_(12,Ee,2,1,"ng-container",33),r()()()),i&2){let e=l(2);d(12),m("ngForOf",e.items.controls)}}function Ie(i,t){i&1&&(o(0,"div",50),P(),o(1,"svg",51),x(2,"path",27),r(),E(),o(3,"div"),c(4,"No hay productos confirmados en el pedido todav\xEDa."),r()())}function ke(i,t){if(i&1){let e=b();o(0,"button",52),u("click",function(){f(e);let a=l(2);return v(a.addNewItem())}),c(1," + A\xF1adir otra l\xEDnea de producto "),r()}}function Te(i,t){if(i&1&&(o(0,"div",24)(1,"div",25)(2,"h3"),P(),o(3,"svg",26),x(4,"path",27),r(),c(5," Resumen de Productos "),r()(),_(6,Fe,13,1,"div",28)(7,Ie,5,0,"div",29)(8,ke,2,0,"button",30),r()),i&2){let e=l();d(6),m("ngIf",e.hasConfirmedItems()),d(),m("ngIf",!e.hasConfirmedItems()),d(),m("ngIf",e.allLinesConfirmed())}}function Ve(i,t){if(i&1){let e=b();o(0,"button",65),u("click",function(){f(e);let a=l(2).index,s=l();return v(s.removeItem(a))}),c(1," No a\xF1adir nuevo "),r()}}function De(i,t){if(i&1){let e=b();o(0,"div",21),u("click",function(){let a=f(e).$implicit,s=l(3).index,p=l();return v(p.selectFamilia(s,a))}),c(1),r()}if(i&2){let e=t.$implicit,n=l(3).index,a=l();M("active",a.selectedFamilies[n]===e),d(),y(" ",e," ")}}function Ne(i,t){if(i&1&&(o(0,"div",66)(1,"label"),c(2,"Filtro por familia"),r(),o(3,"div",19),_(4,De,2,3,"div",20),F(5,"async"),r()()),i&2){let e=l(3);d(4),m("ngForOf",I(5,1,e.familias$))}}function $e(i,t){if(i&1&&(o(0,"label",67),c(1,"Buscar o seleccionar producto"),r()),i&2){let e=l(2).index;m("for","productoSearch-"+e)}}function Ge(i,t){if(i&1&&(o(0,"div",75),c(1," Familia: "),o(2,"strong"),c(3),r()()),i&2){let e=t.ngIf;d(3),h(e)}}function Le(i,t){if(i&1&&(o(0,"span",79),c(1),r()),i&2){let e=l().$implicit;d(),h(e.familia)}}function ze(i,t){if(i&1){let e=b();o(0,"div",76),u("click",function(){let a=f(e).$implicit,s=l(4).index,p=l();return v(p.selectProducto(a,s))}),_(1,Le,2,1,"span",77),o(2,"span",78),c(3),r()()}if(i&2){let e=t.$implicit,n=l(4).index,a=l();d(),m("ngIf",!a.selectedFamilies[n]),d(2),h(e.producto)}}function Ae(i,t){if(i&1&&(o(0,"div",71),_(1,Ge,4,1,"div",72),o(2,"div",73),_(3,ze,4,2,"div",74),F(4,"async"),r()()),i&2){let e=l(3).index,n=l();d(),m("ngIf",n.selectedFamilies[e]),d(),M("grid-layout",n.selectedFamilies[e]),d(),m("ngForOf",I(4,4,n.getFilteredProductos(e,n.searchControls[e].value)))}}function Re(i,t){if(i&1){let e=b();o(0,"div",68)(1,"input",69),u("focus",function(){f(e);let a=l(2).index,s=l();return v(s.showResultsForItem[a]=!0)}),r(),_(2,Ae,5,6,"div",70),r()}if(i&2){let e=l(2).index,n=l();d(),m("id","productoSearch-"+e)("formControl",n.searchControls[e]),d(),m("ngIf",!n.selectedProductos[e]&&(n.showResultsForItem[e]||n.selectedFamilies[e]||n.searchControls[e].value))}}function He(i,t){if(i&1){let e=b();o(0,"div",80)(1,"div",81)(2,"span",82),c(3,"Seleccionado:"),r(),o(4,"strong"),c(5),r()(),o(6,"button",83),u("click",function(){f(e);let a=l(2).index,s=l();return v(s.clearProducto(a))}),c(7,"\xD7"),r()()}if(i&2){let e=t.ngIf;d(5),h(e.producto)}}function je(i,t){if(i&1){let e=b();o(0,"div",21),u("click",function(){let a,s=f(e).$implicit,p=l(4).$implicit;return v((a=p.get("talla"))==null?null:a.setValue(s))}),c(1),r()}if(i&2){let e,n=t.$implicit,a=l(4).$implicit;M("active",((e=a.get("talla"))==null?null:e.value)===n),d(),y(" ",n," ")}}function qe(i,t){if(i&1&&(o(0,"div",18)(1,"label"),c(2,"Talla / Raciones"),r(),o(3,"div",19),_(4,je,2,3,"div",20),r()()),i&2){let e=l().ngIf;d(4),m("ngForOf",e.tallasRaciones)}}function Be(i,t){if(i&1){let e=b();o(0,"div",21),u("click",function(){let a,s=f(e).$implicit,p=l(4).$implicit;return v((a=p.get("relleno"))==null?null:a.setValue(s))}),c(1),r()}if(i&2){let e,n=t.$implicit,a=l(4).$implicit;M("active",((e=a.get("relleno"))==null?null:e.value)===n),d(),y(" ",n," ")}}function Ue(i,t){if(i&1&&(o(0,"div",18)(1,"label"),c(2,"Relleno"),r(),o(3,"div",19),_(4,Be,2,3,"div",20),r()()),i&2){let e=l().ngIf;d(4),m("ngForOf",e.rellenos)}}function Qe(i,t){if(i&1){let e=b();o(0,"div",84),_(1,qe,5,1,"div",85)(2,Ue,5,1,"div",85),o(3,"div",18)(4,"label"),c(5,"Cantidad"),r(),o(6,"div",86)(7,"button",87),u("click",function(){f(e);let a=l(2).index,s=l();return v(s.adjustQuantity(a,-1))}),c(8,"-"),r(),x(9,"input",88),o(10,"button",89),u("click",function(){f(e);let a=l(2).index,s=l();return v(s.adjustQuantity(a,1))}),c(11,"+"),r()()(),o(12,"div",90)(13,"label",91),x(14,"input",92),o(15,"span"),c(16,"\xBFYa est\xE1 en tienda?"),r()()(),o(17,"div",93)(18,"label"),c(19,"Notas para Obrador (espec\xEDficas de este producto)"),r(),x(20,"textarea",94),r()()}if(i&2){let e,n=t.ngIf,a=l(2).$implicit;d(),m("ngIf",n.tallasRaciones&&n.tallasRaciones.length>0),d(),m("ngIf",n.rellenos&&n.rellenos.length>0),d(5),m("disabled",((e=(e=a.get("cantidad"))==null?null:e.value)!==null&&e!==void 0?e:0)<=1)}}function Ye(i,t){if(i&1){let e=b();o(0,"div",95)(1,"div",96)(2,"button",97),u("click",function(){f(e);let a=l(2).index,s=l();return v(s.confirmAndAdd(a))}),c(3," A\xF1adir otro "),P(),o(4,"svg",98),x(5,"line",99)(6,"line",100),r()(),E(),o(7,"button",101),u("click",function(){f(e);let a=l(2).index,s=l();return v(s.confirmLineAndContinue(a))}),c(8," Seguir "),P(),o(9,"svg",98),x(10,"polyline",102),r()()()()}}function We(i,t){if(i&1){let e=b();o(0,"div",103)(1,"div",96)(2,"button",104),u("click",function(){f(e);let a=l(2).index,s=l();return v(s.confirmLine(a))}),c(3," Guardar cambios "),r()()()}}function Ze(i,t){if(i&1&&(o(0,"div",55)(1,"div",56)(2,"span"),c(3),r(),_(4,Ve,2,0,"button",57),r(),_(5,Ne,6,3,"div",58),o(6,"div",18),_(7,$e,2,1,"label",59)(8,Re,3,3,"div",60)(9,He,8,1,"div",61),r(),_(10,Qe,21,3,"div",62)(11,Ye,11,0,"div",63)(12,We,4,0,"div",64),r()),i&2){let e=l().index,n=l();d(3),h(n.isEditMode?"Editando l\xEDnea":"Nueva l\xEDnea de producto"),d(),m("ngIf",n.items.length>1&&!n.confirmedLines[e]),d(),m("ngIf",!n.selectedProductos[e]),d(2),m("ngIf",!n.selectedProductos[e]),d(),m("ngIf",!n.selectedProductos[e]),d(),m("ngIf",n.selectedProductos[e]),d(),m("ngIf",n.selectedProductos[e]),d(),m("ngIf",n.selectedProductos[e]&&!n.isEditMode),d(),m("ngIf",n.isEditMode)}}function Je(i,t){if(i&1&&(o(0,"div",53),_(1,Ze,13,9,"div",54),r()),i&2){let e=t.index,n=l();m("formGroupName",e),d(),m("ngIf",!n.confirmedLines[e])}}function Ke(i,t){if(i&1){let e=b();o(0,"div",112),u("click",function(){f(e);let a=l(2);return v(a.setQuickDate(0))}),o(1,"span",113),c(2,"Hoy"),r(),o(3,"span",114),c(4),r()()}if(i&2){let e=l(2);M("active",e.isSpecificDateSelected(e.getTodayStr())),d(4),h(e.formatDateShort(e.getTodayStr()))}}function Xe(i,t){if(i&1){let e=b();o(0,"div",21),u("click",function(){f(e);let a=l().$implicit,s=l(3);return v(s.setQuickTime(a))}),c(1),r()}if(i&2){let e=l().$implicit,n=l(3);M("active",n.isTimeSelected(e)),d(),y(" ",e," ")}}function et(i,t){if(i&1&&(V(0),_(1,Xe,2,3,"div",123),D()),i&2){let e=t.$implicit,n=l(3);d(),m("ngIf",n.isTimePossible(e))}}function tt(i,t){if(i&1&&(o(0,"div",19),_(1,et,2,1,"ng-container",33),r()),i&2){let e=l(2);d(),m("ngForOf",e.availableHours)}}function nt(i,t){i&1&&(o(0,"div",124),c(1," Primero selecciona un d\xEDa para ver las horas disponibles. "),r())}function it(i,t){i&1&&x(0,"input",125)}function ot(i,t){if(i&1){let e=b();o(0,"div",9)(1,"div",105)(2,"h3",106),P(),o(3,"svg",26),x(4,"rect",107)(5,"line",108)(6,"line",109)(7,"line",110),r(),c(8," Datos de Entrega y Cliente "),r(),E(),o(9,"div",18)(10,"label"),c(11,"D\xEDa de Entrega"),r(),o(12,"div",19),_(13,Ke,5,3,"div",111),o(14,"div",112),u("click",function(){f(e);let a=l();return v(a.setQuickDate(1))}),o(15,"span",113),c(16,"Ma\xF1ana"),r(),o(17,"span",114),c(18),r()(),o(19,"div",112),u("click",function(){f(e);let a=l();return v(a.setNextDay(6))}),o(20,"span",113),c(21,"S\xE1bado"),r(),o(22,"span",114),c(23),r()(),o(24,"div",112),u("click",function(){f(e);let a=l();return v(a.setNextDay(0))}),o(25,"span",113),c(26,"Domingo"),r(),o(27,"span",114),c(28),r()()(),x(29,"input",115),r(),o(30,"div",18)(31,"label"),c(32,"Hora de Entrega"),r(),_(33,tt,2,1,"div",116)(34,nt,2,0,"div",117)(35,it,1,0,"input",118),r(),o(36,"div",18)(37,"label",119),c(38,"Nombre del Cliente"),r(),x(39,"input",120),r(),o(40,"div",18)(41,"label",121),c(42,"Notas para Tienda / Encargos"),r(),x(43,"textarea",122),r()()()}if(i&2){let e=l();d(13),m("ngIf",e.isHoyPossible()),d(),M("active",e.isSpecificDateSelected(e.getTomorrowStr())),d(4),h(e.formatDateShort(e.getTomorrowStr())),d(),M("active",e.isSpecificDateSelected(e.getNextDayDate(6))),d(4),h(e.formatDateShort(e.getNextDayDate(6))),d(),M("active",e.isSpecificDateSelected(e.getNextDayDate(0))),d(4),h(e.formatDateShort(e.getNextDayDate(0))),d(),m("min",e.minDate),d(4),m("ngIf",e.isDateSelected()),d(),m("ngIf",!e.isDateSelected()),d(),m("ngIf",e.isDateSelected())}}function rt(i,t){if(i&1&&(o(0,"span"),c(1),r()),i&2){let e=l(2);d(),h(e.isEditMode?"ACTUALIZAR PEDIDO":"GUARDAR PEDIDO")}}function at(i,t){i&1&&(o(0,"span"),c(1,"GUARDANDO..."),r())}function dt(i,t){if(i&1&&(o(0,"div",126)(1,"button",127),_(2,rt,2,1,"span",34)(3,at,2,0,"span",34),r()()),i&2){let e=l();d(),m("disabled",e.pedidoForm.invalid||e.submitting),d(),m("ngIf",!e.submitting),d(),m("ngIf",e.submitting)}}function lt(i,t){if(i&1&&(o(0,"div",128),P(),o(1,"svg",26),x(2,"path",129)(3,"polyline",130),r(),c(4),r()),i&2){let e=l();d(4),y(" ",e.successMessage," ")}}function ct(i,t){if(i&1&&(o(0,"div",131),P(),o(1,"svg",26),x(2,"circle",132)(3,"line",133)(4,"line",134),r(),c(5),r()),i&2){let e=l();d(5),y(" ",e.errorMessage," ")}}var ge=class i{fb=O(ce);productionService=O(_e);productoService=O(ue);empleadoService=O(k);router=O(Y);route=O(Q);submitting=!1;isEditMode=!1;pedidoId=null;currentGrupoId=null;successMessage="";errorMessage="";showResults=!1;showDeliveryFields=!1;productos$;familias$;empleados$;filteredProductos$;allProductos=[];selectedProductos=[];selectedFamilies=[];showResultsForItem=[];searchControls=[];confirmedLines=[];availableHours=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:30","17:00","18:30","19:30"];leadTimeMinutes=120;pedidoForm=this.fb.group({diaEntrega:["",S.required],horaEntrega:["",S.required],vendedor:["",S.required],estado:["Pendiente"],nombreCliente:["",S.required],notasTienda:[""],items:this.fb.array([],S.required)});get items(){return this.pedidoForm.get("items")}getDefaultDate(){return""}ngOnInit(){if(this.pedidoId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.pedidoId,this.isEditMode&&this.pedidoId&&(this.showDeliveryFields=!0),!this.isEditMode){this.addNewItem();let t=localStorage.getItem("lastVendedor");t&&this.pedidoForm.get("vendedor")?.setValue(t)}this.productoService.getProductos().subscribe(t=>{this.allProductos=t,this.isEditMode&&this.pedidoId&&this.loadPedido(this.pedidoId)}),this.productos$=this.productoService.getProductos(),this.familias$=this.productos$.pipe(w(t=>[...new Set(t.map(e=>e.familia))].sort())),this.empleados$=this.empleadoService.getEmpleados().pipe(w(t=>t.filter(e=>e.activo)))}addNewItem(t,e=!1,n=!1){n||(this.showDeliveryFields=!1);let a=this.fb.group({id:[t||crypto.randomUUID()],productoBase:["",S.required],productoNombre:[""],talla:[""],relleno:[""],cantidad:[1,[S.required,S.min(1)]],guardadoEnTienda:[e],notasPastelero:[""]});this.items.push(a),this.selectedProductos.push(null),this.selectedFamilies.push(null),this.showResultsForItem.push(!1);let s=new te("");this.searchControls.push(s),this.confirmedLines.push(!1)}removeItem(t){let e=this.confirmedLines[t];this.items.length>1&&(this.items.removeAt(t),this.selectedProductos.splice(t,1),this.selectedFamilies.splice(t,1),this.showResultsForItem.splice(t,1),this.searchControls.splice(t,1),this.confirmedLines.splice(t,1)),!e&&this.hasConfirmedItems()&&(this.showDeliveryFields=!0)}loadPedido(t){this.productionService.getPedidos().pipe(G(1),w(e=>{let n=e.find(a=>a.id===t);return n?n.idGrupo?e.filter(a=>a.idGrupo===n.idGrupo):[n]:[]})).subscribe(e=>{if(e.length>0){this.items.clear(),this.selectedProductos=[],this.selectedFamilies=[],this.showResultsForItem=[],this.searchControls=[],this.confirmedLines=[];let n=e[0];this.currentGrupoId=n.idGrupo||null;let a="",s="";try{let p=new Date(n.fechaEntrega);if(!isNaN(p.getTime())){a=p.toISOString().split("T")[0];let g=p.getHours().toString().padStart(2,"0"),C=p.getMinutes().toString().padStart(2,"0");s=`${g}:${C}`}}catch(p){console.error("Error parsing date:",p)}this.pedidoForm.patchValue({diaEntrega:a,horaEntrega:s,vendedor:n.vendedor||"",estado:n.estado,nombreCliente:n.nombreCliente,notasTienda:n.notasTienda}),e.forEach((p,g)=>{this.addNewItem(p.id,p.guardadoEnTienda,!0);let C=this.allProductos.find(T=>T.producto===p.producto)||null;C&&this.selectProducto(C,g),this.getItemGroup(g).patchValue({talla:p.talla||"",relleno:p.relleno||"",cantidad:p.cantidad,notasPastelero:p.notasPastelero||""}),this.confirmedLines[g]=!0}),this.showDeliveryFields=!0}else this.errorMessage="No se encontr\xF3 el pedido a editar."})}getItemGroup(t){return this.items.at(t)}selectFamilia(t,e){this.selectedFamilies[t]===e?this.selectedFamilies[t]=null:this.selectedFamilies[t]=e}getFilteredProductos(t,e){let n=(e||"").toLowerCase(),a=this.selectedFamilies[t];return $(this.allProductos.filter(s=>{let p=s.producto.toLowerCase().includes(n)||s.familia.toLowerCase().includes(n),g=!a||s.familia===a;return p&&g}))}selectProducto(t,e){this.selectedProductos[e]=t,this.showResultsForItem[e]=!1;let n=this.getItemGroup(e);n.get("productoBase")?.setValue(t.id),n.get("productoNombre")?.setValue(t.producto),this.searchControls[e].setValue(t.producto,{emitEvent:!1}),t.tallasRaciones?.length===1?n.get("talla")?.setValue(t.tallasRaciones[0]):n.get("talla")?.setValue(""),t.rellenos?.length===1?n.get("relleno")?.setValue(t.rellenos[0]):n.get("relleno")?.setValue(""),t.tallasRaciones?.length&&t.tallasRaciones.length>1?n.get("talla")?.setValidators(S.required):n.get("talla")?.clearValidators(),n.get("talla")?.updateValueAndValidity()}clearProducto(t){this.selectedProductos[t]=null;let e=this.getItemGroup(t);e.get("productoBase")?.setValue(""),e.get("productoNombre")?.setValue(""),this.searchControls[t].setValue("")}adjustQuantity(t,e){let n=this.getItemGroup(t),a=n.get("cantidad")?.value||0,s=Math.max(1,a+e);n.get("cantidad")?.setValue(s)}get minDate(){return new Date().toISOString().split("T")[0]}isHoyPossible(){return this.availableHours.some(t=>this.isTimePossible(t,this.getTodayStr()))}isDateHoy(){return this.pedidoForm.get("diaEntrega")?.value===this.getTodayStr()}isDateSelected(){return!!this.pedidoForm.get("diaEntrega")?.value}isDateTomorrow(){let t=this.pedidoForm.get("diaEntrega")?.value,e=new Date;e.setDate(e.getDate()+1);let n=e.toISOString().split("T")[0];return t===n}isTimePossible(t,e){let n=e||this.pedidoForm.get("diaEntrega")?.value;if(!n)return!0;let[a,s]=t.split(":").map(Number),[p,g,C]=n.split("-").map(Number),T=new Date(p,g-1,C,a,s,0,0),fe=new Date,ve=this.allProductsInShop()?0:this.leadTimeMinutes,xe=new Date(fe.getTime()+ve*6e4);return T>xe}isTimeSelected(t){return this.pedidoForm.get("horaEntrega")?.value===t}setQuickDate(t){let e=new Date;e.setDate(e.getDate()+t);let n=e.toISOString().split("T")[0];this.pedidoForm.get("diaEntrega")?.setValue(n);let a=this.pedidoForm.get("horaEntrega")?.value;a&&!this.isTimePossible(a,n)&&this.pedidoForm.get("horaEntrega")?.setValue("")}setNextDay(t){let e=new Date,n=e.getDay(),a=(t-n+7)%7||7;e.setDate(e.getDate()+a);let s=e.toISOString().split("T")[0];this.pedidoForm.get("diaEntrega")?.setValue(s);let p=this.pedidoForm.get("horaEntrega")?.value;p&&!this.isTimePossible(p,s)&&this.pedidoForm.get("horaEntrega")?.setValue("")}setQuickTime(t){this.pedidoForm.get("horaEntrega")?.setValue(t)}getTodayStr(){return new Date().toISOString().split("T")[0]}getTomorrowStr(){let t=new Date;return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}getNextDayDate(t){let e=new Date,n=e.getDay(),a=(t-n+7)%7||7;return e.setDate(e.getDate()+a),e.toISOString().split("T")[0]}formatDateShort(t){if(!t)return"";let e=t.split("-");return e.length!==3?t:`${e[2]}/${e[1]}`}isSpecificDateSelected(t){return this.pedidoForm.get("diaEntrega")?.value===t}formatDateForInput(t){if(!t)return"";let e=t instanceof Date?t:new Date(t);if(isNaN(e.getTime()))return"";let n=a=>a.toString().padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}T${n(e.getHours())}:${n(e.getMinutes())}`}saveVendedor(t){localStorage.setItem("lastVendedor",t)}confirmLineAndContinue(t){this.getItemGroup(t).valid?(this.confirmedLines[t]=!0,this.continueToDelivery()):(this.errorMessage="Por favor, completa los datos de esta l\xEDnea.",setTimeout(()=>this.errorMessage="",3e3))}confirmLine(t){this.getItemGroup(t).valid?(this.confirmedLines[t]=!0,this.successMessage=`L\xEDnea #${t+1} confirmada.`,setTimeout(()=>this.successMessage="",2e3),this.allLinesConfirmed()&&(this.showDeliveryFields=!0)):(this.errorMessage="Por favor, completa los datos de esta l\xEDnea.",setTimeout(()=>this.errorMessage="",3e3))}editLine(t){this.confirmedLines[t]=!1,this.showDeliveryFields=!1}confirmAndAdd(t){this.getItemGroup(t).valid?(this.confirmedLines[t]=!0,this.addNewItem(),setTimeout(()=>{let e=this.items.length-1;document.getElementById(`productoSearch-${e}`)?.scrollIntoView({behavior:"smooth",block:"center"})},100)):(this.errorMessage="Completa la l\xEDnea actual antes de a\xF1adir otra.",setTimeout(()=>this.errorMessage="",3e3))}continueToDelivery(){this.showDeliveryFields=!0,setTimeout(()=>{document.getElementById("delivery-section")?.scrollIntoView({behavior:"smooth",block:"start"})},100)}hasConfirmedItems(){return this.confirmedLines.some(t=>t)}allLinesConfirmed(){return this.items.length===0||this.confirmedLines.every(t=>t)}allProductsInShop(){return this.items.length===0?!1:this.items.getRawValue().every(t=>t.guardadoEnTienda)}onSubmit(){if(this.pedidoForm.invalid||this.items.length===0)return;this.submitting=!0,this.errorMessage="";let t=this.pedidoForm.value;if(t.diaEntrega&&t.horaEntrega&&!this.isTimePossible(t.horaEntrega,t.diaEntrega)){this.errorMessage=this.allProductsInShop()?"La hora de entrega debe ser posterior a la hora actual.":"La fecha/hora de entrega no es v\xE1lida (m\xEDnimo 2 horas de antelaci\xF3n).",this.submitting=!1;return}let e=`${t.diaEntrega}T${t.horaEntrega}`,n=this.isEditMode&&this.currentGrupoId||crypto.randomUUID(),a=(t.nombreCliente||"").toUpperCase(),s=t.items.map(g=>({id:g.id||crypto.randomUUID(),idGrupo:n,producto:g.productoNombre,talla:g.talla||"",relleno:g.relleno||"",vendedor:t.vendedor||"",cantidad:g.cantidad,fechaEntrega:new Date(e),estado:g.guardadoEnTienda?"Terminado":t.estado||"Pendiente",nombreCliente:a,notasPastelero:g.notasPastelero||"",notasTienda:t.notasTienda||"",guardadoEnTienda:g.guardadoEnTienda||!1,fechaActualizacion:new Date}));(this.isEditMode?this.productionService.updatePedidos(s):this.productionService.addPedidos(s)).subscribe({next:()=>{t.vendedor&&localStorage.setItem("lastVendedor",t.vendedor),this.successMessage=`Pedido ${this.isEditMode?"actualizado":"guardado"} correctamente. Redirigiendo...`,setTimeout(()=>this.router.navigate(["/pedidos"]),2e3)},error:g=>{this.errorMessage=g.message,this.submitting=!1}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=z({type:i,selectors:[["app-pedido-form"]],standalone:!0,features:[R],decls:19,vars:10,consts:[[1,"page-container"],[1,"header-section"],["routerLink","/pedidos","title","Volver",1,"back-btn"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"responsive-grid",3,"ngSubmit","formGroup"],["class","form-card employee-card",4,"ngIf"],["class","selected-vendedor-info",3,"click",4,"ngIf"],["class","form-card summary-card-top",4,"ngIf"],[1,"column"],["formArrayName","items",1,"active-items-list"],[3,"formGroupName",4,"ngFor","ngForOf"],["class","column",4,"ngIf"],["class","submit-container",4,"ngIf"],[1,"alerts"],["class","alert success",4,"ngIf"],["class","alert error",4,"ngIf"],[1,"form-card","employee-card"],[1,"form-group"],[1,"quick-chips"],["class","chip",3,"active","click",4,"ngFor","ngForOf"],[1,"chip",3,"click"],[1,"selected-vendedor-info",3,"click"],[1,"change-link"],[1,"form-card","summary-card-top"],[1,"items-header"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["class","table-container",4,"ngIf"],["class","no-items-placeholder",4,"ngIf"],["type","button","class","btn-add-line",3,"click",4,"ngIf"],[1,"table-container"],[1,"items-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-product-name"],["class","table-shop-badge",4,"ngIf"],[1,"table-details"],["class","table-note",4,"ngIf"],[1,"table-qty"],[1,"table-actions"],["type","button","title","Editar",1,"btn-mini-action",3,"click"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["type","button","title","Eliminar",1,"btn-mini-action","del",3,"click"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"table-shop-badge"],[1,"table-note"],[1,"no-items-placeholder"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",2,"margin-bottom","0.5rem","opacity","0.5"],["type","button",1,"btn-add-line",3,"click"],[3,"formGroupName"],["class","product-item-row",4,"ngIf"],[1,"product-item-row"],[1,"item-number-header"],["type","button","class","btn-cancel-line",3,"click",4,"ngIf"],["class","form-group family-filter-group",4,"ngIf"],[3,"for",4,"ngIf"],["class","search-wrapper",4,"ngIf"],["class","selected-badge",4,"ngIf"],["class","options-grid",4,"ngIf"],["class","line-actions",4,"ngIf"],["class","line-actions edit-confirm",4,"ngIf"],["type","button",1,"btn-cancel-line",3,"click"],[1,"form-group","family-filter-group"],[3,"for"],[1,"search-wrapper"],["type","text","placeholder","Escribe para buscar...","autocomplete","off",3,"focus","id","formControl"],["class","product-results shadow-lg",4,"ngIf"],[1,"product-results","shadow-lg"],["class","products-header",4,"ngIf"],[1,"products-container"],["class","product-item",3,"click",4,"ngFor","ngForOf"],[1,"products-header"],[1,"product-item",3,"click"],["class","family-tag",4,"ngIf"],[1,"name"],[1,"family-tag"],[1,"selected-badge"],[1,"badge-content"],[1,"label"],["type","button",1,"btn-clear",3,"click"],[1,"options-grid"],["class","form-group",4,"ngIf"],[1,"cantidad-control"],["type","button",3,"click","disabled"],["type","number","formControlName","cantidad","readonly",""],["type","button",3,"click"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","formControlName","guardadoEnTienda"],[1,"form-group","wide-group"],["formControlName","notasPastelero","placeholder","Ej: Escribir Feliz Cumplea\xF1os, sin nata..."],[1,"line-actions"],[1,"grid-buttons"],["type","button",1,"btn-confirm-add",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["type","button",1,"btn-continue",3,"click"],["points","9 18 15 12 9 6"],[1,"line-actions","edit-confirm"],["type","button",1,"btn-continue",2,"grid-column","span 2",3,"click"],["id","delivery-section",1,"form-card"],[1,"delivery-header"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],["class","chip date-chip",3,"active","click",4,"ngIf"],[1,"chip","date-chip",3,"click"],[1,"day-name"],[1,"day-date"],["type","date","formControlName","diaEntrega",2,"margin-top","0.75rem",3,"min"],["class","quick-chips",4,"ngIf"],["class","info-inline",4,"ngIf"],["style","margin-top: 0.75rem","type","time","formControlName","horaEntrega",4,"ngIf"],["for","nombreCliente"],["id","nombreCliente","type","text","formControlName","nombreCliente","placeholder","Nombre y apellidos"],["for","notasTienda"],["id","notasTienda","formControlName","notasTienda","placeholder","Detalles de recogida, contacto..."],["class","chip",3,"active","click",4,"ngIf"],[1,"info-inline"],["type","time","formControlName","horaEntrega",2,"margin-top","0.75rem"],[1,"submit-container"],["type","submit",1,"main-submit",3,"disabled"],[1,"alert","success"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"alert","error"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),P(),o(3,"svg",3),x(4,"path",4),r()(),E(),o(5,"h2"),c(6),r()(),o(7,"form",5),u("ngSubmit",function(){return n.onSubmit()}),_(8,Ce,7,3,"div",6)(9,Pe,6,1,"div",7)(10,Te,9,3,"div",8),o(11,"div",9)(12,"div",10),_(13,Je,2,2,"div",11),r()(),_(14,ot,44,14,"div",12)(15,dt,4,3,"div",13),r(),o(16,"div",14),_(17,lt,5,1,"div",15)(18,ct,6,1,"div",16),r()()),e&2){let a,s;d(6),h(n.isEditMode?"Editar Pedido":"Nuevo Pedido"),d(),m("formGroup",n.pedidoForm),d(),m("ngIf",!((a=n.pedidoForm.get("vendedor"))!=null&&a.value)),d(),m("ngIf",(s=n.pedidoForm.get("vendedor"))==null?null:s.value),d(),m("ngIf",n.hasConfirmedItems()||n.isEditMode),d(3),m("ngForOf",n.items.controls),d(),m("ngIf",n.showDeliveryFields||n.isEditMode),d(),m("ngIf",n.showDeliveryFields||n.isEditMode),d(2),m("ngIf",n.successMessage),d(),m("ngIf",n.errorMessage)}},dependencies:[B,H,j,q,se,ne,K,ie,J,X,ee,oe,re,le,ae,de,Z,W],styles:[".page-container[_ngcontent-%COMP%]{padding:1rem;max-width:1100px;margin:0 auto;background:#f8fafc;min-height:calc(100vh - 64px)}.header-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;align-items:center;gap:1rem}h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#1e293b}.back-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;padding:.5rem;border-radius:10px;display:flex;cursor:pointer;color:#64748b;gap:1.5rem;align-items:start;max-width:800px;margin:0 auto}.back-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 1px 3px #0000001a;border:1px solid #e2e8f0;margin-bottom:1rem}.form-card.employee-card[_ngcontent-%COMP%]{padding-bottom:.5rem;border-bottom:4px solid #3b82f6}.form-card.employee-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], .form-card.employee-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.75rem}.form-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.25rem;font-size:.9rem;color:#64748b;text-transform:uppercase;letter-spacing:.05em;display:flex;align-items:center;gap:.5rem}.selected-vendedor-info[_ngcontent-%COMP%]{background:#f1f5f9;padding:.5rem 1rem;border-radius:10px;font-size:.9rem;color:#475569;display:flex;align-items:center;gap:.5rem;cursor:pointer;margin-bottom:1.5rem;border:1px solid #e2e8f0;width:fit-content;font-weight:500;box-shadow:0 1px 2px #0000000d}.selected-vendedor-info[_ngcontent-%COMP%]:hover{background:#e2e8f0}.selected-vendedor-info[_ngcontent-%COMP%]   .change-link[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:underline;font-size:.8rem;margin-left:.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#334155;font-size:.95rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e2e8f0;border-radius:12px;font-size:1rem;background-color:#fcfcfd}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background-color:#fff}.form-group[_ngcontent-%COMP%]   input#nombreCliente[_ngcontent-%COMP%]{text-transform:uppercase}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px}.quick-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.quick-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{padding:.6rem .8rem;background:#f1f5f9;border:1px solid #e2e8f0;border-radius:8px;font-size:.85rem;font-weight:500;color:#475569;cursor:pointer;transition:all .2s}.quick-chips[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]:active{background:#e2e8f0}.quick-chips[_ngcontent-%COMP%]   .chip.active[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border-color:#3b82f6}.quick-chips[_ngcontent-%COMP%]   .chip.date-chip[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:85px;padding:.5rem .75rem}.quick-chips[_ngcontent-%COMP%]   .chip.date-chip[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%]{font-weight:700;font-size:.85rem}.quick-chips[_ngcontent-%COMP%]   .chip.date-chip[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]{font-size:.75rem;opacity:.8;margin-top:2px}.quick-chips[_ngcontent-%COMP%]   .chip.date-chip.active[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]{opacity:1}.search-wrapper[_ngcontent-%COMP%]{position:relative}.product-results[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;z-index:50;background:#fff;border:1px solid #e2e8f0;border-radius:12px;margin-top:4px;max-height:350px;overflow-y:auto;box-shadow:0 10px 15px -3px #0000001a}.product-results[_ngcontent-%COMP%]   .products-container.grid-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:.5rem;padding:.75rem}.product-results[_ngcontent-%COMP%]   .products-container.grid-layout[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:10px;padding:.75rem .5rem;text-align:center;background:#f8fafc;min-height:70px;display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:500;font-size:.9rem;line-height:1.2;border-bottom:1px solid #e2e8f0}.product-results[_ngcontent-%COMP%]   .products-container.grid-layout[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:hover{background:#eff6ff;border-color:#3b82f6;color:#1e40af}.product-results[_ngcontent-%COMP%]   .products-container.grid-layout[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .family-tag[_ngcontent-%COMP%]{margin-bottom:4px;margin-right:0}.product-results[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]{padding:.75rem 1rem;background:#f1f5f9;border-bottom:1px solid #e2e8f0;font-size:.85rem;display:flex;justify-content:space-between;align-items:center;color:#475569}.product-results[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   .btn-clear-inline[_ngcontent-%COMP%]{background:none;border:none;color:#3b82f6;font-size:.75rem;cursor:pointer;text-decoration:underline;padding:0}.product-results[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]{padding:.75rem 1rem;cursor:pointer;border-bottom:1px solid #f1f5f9;display:flex;align-items:center}.product-results[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-results[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]:hover{background:#f8fafc}.product-results[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .family-tag[_ngcontent-%COMP%]{font-size:.7rem;background:#f1f5f9;padding:2px 6px;border-radius:4px;margin-right:8px;color:#64748b}.product-results[_ngcontent-%COMP%]   .product-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1}.selected-badge[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem 1rem;background:#eff6ff;border:1px solid #bfdbfe;border-radius:12px;display:flex;justify-content:space-between;align-items:center}.selected-badge[_ngcontent-%COMP%]   .badge-content[_ngcontent-%COMP%]{font-size:.9rem}.selected-badge[_ngcontent-%COMP%]   .badge-content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#1e40af;margin-right:.5rem}.selected-badge[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#ef4444;cursor:pointer}.cantidad-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.cantidad-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;border:none;background:#3b82f6;color:#fff;font-size:1.5rem;display:flex;align-items:center;justify-content:center;cursor:pointer}.cantidad-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95)}.cantidad-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#cbd5e1}.cantidad-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:1.25rem;font-weight:700}.submit-container[_ngcontent-%COMP%]   .main-submit[_ngcontent-%COMP%]{width:100%;padding:1rem;background:#059669;color:#fff;border:none;border-radius:12px;font-size:1.1rem;font-weight:700;cursor:pointer;box-shadow:0 4px 6px -1px #05966966}.submit-container[_ngcontent-%COMP%]   .main-submit[_ngcontent-%COMP%]:active{transform:scale(.98)}.submit-container[_ngcontent-%COMP%]   .main-submit[_ngcontent-%COMP%]:disabled{background:#9ca3af;box-shadow:none}.alerts[_ngcontent-%COMP%]{position:fixed;bottom:1.5rem;left:1.5rem;right:1.5rem;z-index:100}.alerts[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:1rem;border-radius:12px;display:flex;align-items:center;gap:.75rem;box-shadow:0 10px 15px -3px #0000001a;margin-top:.5rem}.alerts[_ngcontent-%COMP%]   .alert.success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}.alerts[_ngcontent-%COMP%]   .alert.error[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b;border:1px solid #fecaca}.error-inline[_ngcontent-%COMP%]{color:#ef4444;font-size:.85rem;margin-top:.5rem;font-weight:500}.info-inline[_ngcontent-%COMP%]{color:#64748b;font-size:.85rem;margin-top:.5rem;font-style:italic}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;padding:.5rem;background:#f1f5f9;border-radius:10px;margin-top:.5rem}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;cursor:pointer;font-weight:600;color:#1e293b;margin-bottom:0!important}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.table-container[_ngcontent-%COMP%]{margin-bottom:1.5rem;overflow-x:auto;border:1px solid #e2e8f0;border-radius:12px}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.9rem}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;text-align:left;padding:.75rem;color:#64748b;font-weight:700;text-transform:uppercase;font-size:.7rem}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;border-top:1px solid #e2e8f0;vertical-align:middle}.table-product-name[_ngcontent-%COMP%]{font-weight:700;color:#1e293b}.table-shop-badge[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;font-size:.6rem;font-weight:800;padding:2px 4px;border-radius:4px;margin-top:2px;display:inline-block}.table-details[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b;display:flex;flex-direction:column;gap:2px}.table-note[_ngcontent-%COMP%]{color:#856404;background:#fff9c4;padding:2px 4px;border-radius:4px;font-size:.75rem;margin-top:2px}.table-qty[_ngcontent-%COMP%]{font-weight:800;color:#d35400;text-align:center;font-size:1.1rem}.table-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end}.btn-mini-action[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:1px solid #e2e8f0;background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#64748b}.btn-mini-action[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#3b82f6;border-color:#3b82f6}.btn-mini-action.del[_ngcontent-%COMP%]:hover{color:#ef4444;border-color:#ef4444;background:#fef2f2}.no-items-placeholder[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#94a3b8;font-style:italic;background:#f8fafc;border-radius:12px;margin-bottom:1rem;border:2px dashed #e2e8f0}.btn-add-line[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#fff;color:#3b82f6;border:2px dashed #3b82f6;border-radius:12px;font-weight:600;cursor:pointer;margin-bottom:1rem}.btn-add-line[_ngcontent-%COMP%]:hover{background:#eff6ff}.line-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-top:1.5rem;padding-top:1.5rem;border-top:1px dashed #e2e8f0}.line-actions[_ngcontent-%COMP%]   .grid-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}.line-actions[_ngcontent-%COMP%]   .cancel-container[_ngcontent-%COMP%]{margin-top:.75rem;display:flex;justify-content:flex-start}.line-actions[_ngcontent-%COMP%]   .cancel-container[_ngcontent-%COMP%]   .btn-cancel-action[_ngcontent-%COMP%]{background:none;border:none;color:#e11d48;font-weight:600;text-decoration:underline;padding:.5rem 0;font-size:.85rem;cursor:pointer}.line-actions[_ngcontent-%COMP%]   .cancel-container[_ngcontent-%COMP%]   .btn-cancel-action[_ngcontent-%COMP%]:hover{color:#be123c}.line-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.85rem;border-radius:12px;font-weight:700;cursor:pointer;transition:all .2s;font-size:.9rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.line-actions[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;border:1px solid #e2e8f0}.line-actions[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]:hover{background:#e2e8f0}.line-actions[_ngcontent-%COMP%]   .btn-confirm-add[_ngcontent-%COMP%]{background:#eff6ff;color:#1d4ed8;border:1px solid #bfdbfe}.line-actions[_ngcontent-%COMP%]   .btn-confirm-add[_ngcontent-%COMP%]:hover{background:#dbeafe}.line-actions[_ngcontent-%COMP%]   .btn-continue[_ngcontent-%COMP%]{background:#0f172a;color:#fff;border:none;width:100%}.line-actions[_ngcontent-%COMP%]   .btn-continue[_ngcontent-%COMP%]:hover{background:#1e293b;color:#fff}.product-item-row.editing[_ngcontent-%COMP%]{border:2px solid #3b82f6;box-shadow:0 4px 12px #3b82f61a}.items-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.items-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0!important}.items-header[_ngcontent-%COMP%]   .btn-add-item[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:.5rem 1rem;border-radius:8px;font-weight:600;cursor:pointer;font-size:.85rem}.items-header[_ngcontent-%COMP%]   .btn-add-item[_ngcontent-%COMP%]:hover{background:#2563eb}.product-item-row[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid #e2e8f0;border-radius:12px;margin-bottom:1.5rem;background:#f8fafc}.product-item-row[_ngcontent-%COMP%]   .item-number-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;font-weight:700;color:#64748b;font-size:.8rem;text-transform:uppercase}.product-item-row[_ngcontent-%COMP%]   .item-number-header[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:none;border:none;color:#ef4444;font-size:.75rem;font-weight:600;cursor:pointer;text-decoration:underline}.product-item-row[_ngcontent-%COMP%]   .item-number-header[_ngcontent-%COMP%]   .btn-cancel-line[_ngcontent-%COMP%]{background:#fee2e2;border:none;color:#ef4444;font-size:.75rem;font-weight:700;cursor:pointer;padding:.4rem .8rem;border-radius:6px;transition:all .2s}.product-item-row[_ngcontent-%COMP%]   .item-number-header[_ngcontent-%COMP%]   .btn-cancel-line[_ngcontent-%COMP%]:hover{background:#fecaca}.options-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem;margin-top:1rem}@media (min-width: 640px){.options-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media (min-width: 640px){.wide-group[_ngcontent-%COMP%]{grid-column:span 2}}"]})};export{ge as PedidoFormComponent};
