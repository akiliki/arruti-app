import{a as ae}from"./chunk-2DOZQ56E.js";import{a as de}from"./chunk-NAFMCCRU.js";import{b as X,d as ee,f as D,i as te,n as ne,o as ie,p as oe,r as re}from"./chunk-74UN4DIZ.js";import"./chunk-BKTZ77TT.js";import{l as Q}from"./chunk-MLTMCV35.js";import{$a as d,D as G,I as A,Ib as Y,J as z,Ja as g,Jb as J,K as H,Kb as Z,Lb as W,M as R,Ma as s,Mb as K,Na as x,Pa as a,Qa as r,Ra as S,Sa as E,Ta as k,Ua as M,V as B,Va as u,Wa as l,Z as L,_a as U,ab as b,bb as h,eb as q,fa as m,ga as f,gb as y,hb as F,ib as V,j as N,jb as j,q as I,r as $,ya as o}from"./chunk-ISGLS2OQ.js";function le(t,i){if(t&1&&(a(0,"option",7),d(1),r()),t&2){let e=i.$implicit;s("value",e),o(),b(e)}}function se(t,i){if(t&1){let e=M();a(0,"div",33)(1,"button",34),u("click",function(){m(e);let c=l(2);return f(c.toggleStatus("Pendiente"))}),S(2,"span",35),d(3),r(),a(4,"button",34),u("click",function(){m(e);let c=l(2);return f(c.toggleStatus("En Proceso"))}),S(5,"span",36),d(6),r(),a(7,"button",34),u("click",function(){m(e);let c=l(2);return f(c.toggleStatus("Terminado"))}),S(8,"span",37),d(9),r()()}if(t&2){let e=i.ngIf,n=l(2);o(),x("active",n.isStatusActive("Pendiente")),o(2),h(" Pendiente (",e.falta,") "),o(),x("active",n.isStatusActive("En Proceso")),o(2),h(" En curso (",e.enCurso,") "),o(),x("active",n.isStatusActive("Terminado")),o(2),h(" Terminado (",e.terminado,") ")}}function pe(t,i){if(t&1&&(a(0,"div",26)(1,"div",27)(2,"label"),d(3,"Nombre del producto"),r(),S(4,"input",28),r(),a(5,"div",27)(6,"label"),d(7,"Familia de productos"),r(),a(8,"select",29)(9,"option",30),d(10,"Todas las familias"),r(),g(11,le,2,2,"option",31),y(12,"async"),r()(),a(13,"div",27)(14,"label"),d(15,"Filtrar por Estado"),r(),g(16,se,10,9,"div",32),y(17,"async"),r()()),t&2){let e=l();o(4),s("formControl",e.productoFilter),o(4),s("formControl",e.familiaFilter),o(3),s("ngForOf",F(12,4,e.familias$)),o(5),s("ngIf",F(17,6,e.counts$))}}function _e(t,i){if(t&1){let e=M();a(0,"div",40)(1,"div",41),u("click",function(){m(e);let c=l(2);return f(c.toggleStatus("Pendiente"))}),S(2,"span",42),a(3,"strong"),d(4),r(),d(5," Pendientes "),r(),a(6,"div",41),u("click",function(){m(e);let c=l(2);return f(c.toggleStatus("En Proceso"))}),S(7,"span",43),a(8,"strong"),d(9),r(),d(10," En curso "),r(),a(11,"div",41),u("click",function(){m(e);let c=l(2);return f(c.toggleStatus("Terminado"))}),S(12,"span",44),a(13,"strong"),d(14),r(),d(15," hechos "),r()()}if(t&2){let e=i.ngIf,n=l(2);o(),x("active",n.isStatusActive("Pendiente")),o(3),b(e.falta),o(2),x("active",n.isStatusActive("En Proceso")),o(3),b(e.enCurso),o(2),x("active",n.isStatusActive("Terminado")),o(3),b(e.terminado)}}function ge(t,i){if(t&1&&(a(0,"div",38),g(1,_e,16,9,"div",39),y(2,"async"),r()),t&2){let e=l();o(),s("ngIf",F(2,1,e.counts$))}}function me(t,i){if(t&1){let e=M();a(0,"div",53),u("click",function(){let c=m(e).$implicit,p=l(4);return f(p.setFechaToPedido(c))}),a(1,"span",54),d(2),y(3,"date"),r(),a(4,"span",55),d(5),r(),a(6,"span",56),d(7),r()()}if(t&2){let e=i.$implicit;o(2),b(V(3,3,e.fechaEntrega,"HH:mm")),o(3),b(e.producto),o(2),h("",e.cantidad,"u.")}}function fe(t,i){if(t&1&&(a(0,"div",51),g(1,me,8,6,"div",52),r()),t&2){let e=l(2).ngIf;o(),s("ngForOf",e)}}function ue(t,i){if(t&1){let e=M();a(0,"div",46)(1,"div",47),u("click",function(){m(e);let c=l(2);return f(c.showUpcomingList=!c.showUpcomingList)}),a(2,"span",48),d(3,"\u26A0\uFE0F"),r(),a(4,"h3"),d(5),r(),a(6,"span",49),d(7),r()(),g(8,fe,2,1,"div",50),r()}if(t&2){let e=l().ngIf,n=l();o(5),h("Pedidos pr\xF3ximos sin empezar (",e.length,")"),o(2),b(n.showUpcomingList?"\u25BC":"\u25B6"),o(),s("ngIf",n.showUpcomingList)}}function xe(t,i){if(t&1&&(E(0),g(1,ue,9,3,"div",45),k()),t&2){let e=i.ngIf;o(),s("ngIf",e.length>0)}}function be(t,i){t&1&&(a(0,"span",84),d(1,"\u25CF"),r())}function he(t,i){if(t&1&&(a(0,"span",82),d(1),a(2,"strong"),d(3),r(),g(4,be,2,0,"span",83),r()),t&2){let e=l().$implicit;x("with-note",e.hasNotes),o(),h(" ",e.relleno,": "),o(2),b(e.cantidad),o(),s("ngIf",e.hasNotes)}}function Ce(t,i){if(t&1&&(E(0),g(1,he,5,5,"span",81),k()),t&2){let e=i.$implicit;o(),s("ngIf",e.relleno)}}function ve(t,i){if(t&1){let e=M();a(0,"button",94),u("click",function(){m(e);let c=l().$implicit,p=l(6);return f(p.updateStatus(c.id,"En Proceso"))}),d(1," EMPEZAR "),r()}if(t&2){let e=l().$implicit,n=l(6);s("disabled",n.updatingId===e.id)}}function Pe(t,i){if(t&1){let e=M();a(0,"button",95),u("click",function(){m(e);let c=l().$implicit,p=l(6);return f(p.updateStatus(c.id,"Terminado"))}),d(1," TERMINAR "),r()}if(t&2){let e=l().$implicit,n=l(6);s("disabled",n.updatingId===e.id)}}function Oe(t,i){t&1&&(a(0,"span",96),d(1,"\u2713"),r())}function we(t,i){if(t&1&&(a(0,"div",99)(1,"strong"),d(2,"RELLENO:"),r(),d(3),r()),t&2){let e=l(2).$implicit;o(3),h(" ",e.relleno,"")}}function Me(t,i){if(t&1&&(a(0,"div")(1,"strong"),d(2,"NOTA:"),r(),d(3),r()),t&2){let e=l(2).$implicit;o(3),h(" ",e.notasPastelero,"")}}function Se(t,i){if(t&1&&(a(0,"div",97),g(1,we,4,1,"div",98)(2,Me,4,1,"div",24),r()),t&2){let e=l().$implicit;o(),s("ngIf",e.relleno),o(),s("ngIf",e.notasPastelero)}}function ye(t,i){if(t&1){let e=M();a(0,"div",85)(1,"div",86)(2,"span",54),d(3),y(4,"date"),r(),a(5,"span",56),d(6),r(),a(7,"span",87),d(8),r(),a(9,"div",88)(10,"button",89),u("click",function(){m(e);let c=l().$implicit;return f(c.expanded=!c.expanded)}),d(11),r(),g(12,ve,2,1,"button",90)(13,Pe,2,1,"button",91)(14,Oe,2,0,"span",92),r()(),g(15,Se,3,2,"div",93),r()}if(t&2){let e=i.$implicit,n=l().$implicit,c=l(5);x("urgent",c.isUrgent(e.fechaEntrega)),o(3),b(V(4,12,e.fechaEntrega,"HH:mm")),o(3),h("",e.cantidad,"u."),o(2),b(e.nombreCliente||"Mostrador"),o(2),x("active",n.expanded),o(),h(" ",n.expanded?"Ocultar":"Ver"," detalle \u{1F4C4} "),o(),s("ngIf",e.estado==="Pendiente"),o(),s("ngIf",e.estado==="En Proceso"),o(),s("ngIf",e.estado==="Terminado"||e.estado==="Entregado"),o(),s("ngIf",n.expanded&&(e.notasPastelero||e.relleno))}}function Ee(t,i){if(t&1&&(a(0,"div",72)(1,"div",73)(2,"div",74)(3,"span",75),d(4),r(),a(5,"div",76),g(6,Ce,2,1,"ng-container",77),r()(),a(7,"div",78),d(8),r()(),a(9,"div",79),g(10,ye,16,15,"div",80),r()()),t&2){let e=i.$implicit;x("in-process",e.estadoGlobal==="En Proceso")("finished",e.estadoGlobal==="Terminado"),o(4),h(" ",e.talla," "),o(2),s("ngForOf",e.rellenoSummary),o(2),h("",e.totalCantidad," ud. total"),o(2),s("ngForOf",e.pedidos)}}function ke(t,i){if(t&1&&(a(0,"div",65)(1,"div",66)(2,"div",67)(3,"span",56),d(4),r(),a(5,"span",68),d(6,"u."),r()(),a(7,"div",69)(8,"div",55),d(9),r()()(),a(10,"div",70),g(11,Ee,11,8,"div",71),r()()),t&2){let e=i.$implicit;x("in-process",e.estadoGlobal==="En Proceso")("urgent",e.isUrgent)("finished",e.estadoGlobal==="Terminado"),o(4),b(e.totalCantidad),o(5),b(e.producto),o(2),s("ngForOf",e.tallaGroups)}}function Te(t,i){if(t&1&&(a(0,"div",60)(1,"div",61)(2,"h3"),d(3),r(),a(4,"span",62),d(5),r()(),a(6,"div",63),g(7,ke,12,9,"div",64),r()()),t&2){let e=i.$implicit;o(3),b(e.label),o(2),h("",e.productGroups.length," tipos de prod."),o(2),s("ngForOf",e.productGroups)}}function Ie(t,i){if(t&1&&(E(0),g(1,Te,8,3,"div",59),k()),t&2){let e=l().ngIf;o(),s("ngForOf",e)}}function ze(t,i){t&1&&(a(0,"span",116),d(1,"\u{1F4DD}"),r())}function Fe(t,i){if(t&1&&(a(0,"span",118),d(1),a(2,"strong"),d(3),r()()),t&2){let e=l().$implicit;x("r-note",e.hasNotes),o(),h(" ",e.relleno,": "),o(2),b(e.cantidad)}}function Ve(t,i){if(t&1&&(E(0),g(1,Fe,4,4,"span",117),k()),t&2){let e=i.$implicit;o(),s("ngIf",e.relleno)}}function De(t,i){if(t&1){let e=M();a(0,"button",119),u("click",function(){m(e);let c=l().$implicit,p=l(4);return f(p.updateGroupStatus(c,"En Proceso"))}),d(1),r()}if(t&2){let e=l().$implicit,n=l(4);o(),h(" EMPEZAR (",n.countByStatus(e,"Pendiente"),") ")}}function $e(t,i){if(t&1){let e=M();a(0,"button",120),u("click",function(){m(e);let c=l().$implicit,p=l(4);return f(p.updateGroupStatus(c,"Terminado"))}),d(1),r()}if(t&2){let e=l().$implicit,n=l(4);o(),h(" TERMINAR (",n.countByStatus(e,"En Proceso"),") ")}}function Ge(t,i){if(t&1){let e=M();a(0,"span",121),d(1," \u2713 TODO HECHO "),a(2,"button",122),u("click",function(){m(e);let c=l().$implicit,p=l(4);return f(p.updateGroupStatus(c,"Pendiente"))}),d(3,"\u21A9"),r()()}}function Ae(t,i){if(t&1&&(a(0,"span",141),d(1),r()),t&2){let e=l().$implicit;o(),b(e.relleno)}}function Be(t,i){if(t&1&&(a(0,"div",142)(1,"span",143),d(2),r()()),t&2){let e=l().$implicit;o(2),h("\u{1F4DD} ",e.notasPastelero,"")}}function Ne(t,i){if(t&1){let e=M();a(0,"button",144),u("click",function(){m(e);let c=l().$implicit,p=l(6);return f(p.updateStatus(c.id,"En Proceso"))}),d(1," EMPEZAR "),r()}}function He(t,i){if(t&1){let e=M();a(0,"button",145),u("click",function(){m(e);let c=l().$implicit,p=l(6);return f(p.updateStatus(c.id,"Terminado"))}),d(1," TERMINAR "),r()}}function Re(t,i){t&1&&(a(0,"span",146),d(1,"\u2713 HECHO"),r())}function Le(t,i){if(t&1&&(a(0,"tr",124)(1,"td",125)(2,"div",126)(3,"div",127)(4,"span",128),d(5),r(),a(6,"span",129),d(7),r(),g(8,Ae,2,1,"span",130),a(9,"span",131),d(10),r()(),g(11,Be,3,1,"div",132),a(12,"div",133)(13,"div",134)(14,"span",135),d(15),y(16,"date"),r(),a(17,"span",136),d(18),r()(),a(19,"div",137),g(20,Ne,2,0,"button",138)(21,He,2,0,"button",139)(22,Re,2,0,"span",140),r()()()()()),t&2){let e=i.$implicit,n=l(2).$implicit,c=l().$implicit,p=l(3);x("urgent",p.isUrgent(e.fechaEntrega)),o(5),b(c.producto),o(2),b(n.talla),o(),s("ngIf",e.relleno),o(2),h("",e.cantidad,"u"),o(),s("ngIf",e.notasPastelero),o(4),b(V(16,12,e.fechaEntrega,"HH:mm")),o(3),b(e.nombreCliente||"Mostrador"),o(2),s("ngIf",e.estado==="Pendiente"),o(),s("ngIf",e.estado==="En Proceso"),o(),s("ngIf",e.estado==="Terminado"||e.estado==="Entregado")}}function Ue(t,i){if(t&1&&(E(0),g(1,Le,23,15,"tr",123),k()),t&2){let e=l().$implicit;o(),s("ngForOf",e.pedidos)}}function qe(t,i){if(t&1){let e=M();E(0),a(1,"tr")(2,"td",103),d(3),r(),a(4,"td",104)(5,"div",105),d(6),g(7,ze,2,0,"span",106),r()(),a(8,"td",107)(9,"strong"),d(10),r()(),a(11,"td",108)(12,"div",109),g(13,Ve,2,1,"ng-container",77),r()(),a(14,"td",110)(15,"div",111)(16,"button",112),u("click",function(){let c=m(e).$implicit;return f(c.expanded=!c.expanded)}),d(17),r(),g(18,De,2,1,"button",113)(19,$e,2,1,"button",114)(20,Ge,4,0,"span",115),r()()(),g(21,Ue,2,1,"ng-container",24),k()}if(t&2){let e=i.$implicit,n=l().$implicit,c=l(3);o(),x("tr-urgent",n.isUrgent)("tr-finished",e.estadoGlobal==="Terminado"),o(2),h(" ",n.producto," "),o(3),h(" ",e.talla," "),o(),s("ngIf",e.hasAnyNotes&&!e.expanded),o(3),b(e.totalCantidad),o(3),s("ngForOf",e.rellenoSummary),o(3),x("active",e.expanded),o(),h(" ",e.expanded?"Ocultar":"Ver"," detalle \u{1F4C4} "),o(),s("ngIf",c.hasPending(e)),o(),s("ngIf",c.hasInProcess(e)),o(),s("ngIf",e.estadoGlobal==="Terminado"),o(),s("ngIf",e.expanded)}}function je(t,i){if(t&1&&(E(0),g(1,qe,22,16,"ng-container",77),k()),t&2){let e=i.$implicit;o(),s("ngForOf",e.tallaGroups)}}function Ye(t,i){if(t&1&&(E(0),a(1,"div",100)(2,"table",101)(3,"thead")(4,"tr")(5,"th"),d(6,"PRODUCTO"),r(),a(7,"th"),d(8,"RACIONES"),r(),a(9,"th",102),d(10,"UD."),r(),a(11,"th"),d(12,"DETALLE RELLENOS"),r(),a(13,"th"),d(14,"ACCIONES"),r()()(),a(15,"tbody"),g(16,je,2,1,"ng-container",77),r()()(),k()),t&2){let e=l().ngIf;o(16),s("ngForOf",e[0].productGroups)}}function Je(t,i){t&1&&(a(0,"div",147),d(1," No hay productos pendientes de producir. "),r())}function Ze(t,i){if(t&1&&(a(0,"div",57),g(1,Ie,2,1,"ng-container",24)(2,Ye,17,1,"ng-container",24)(3,Je,2,0,"div",58),r()),t&2){let e=i.ngIf,n=l();o(),s("ngIf",n.groupByTimeSlot.value),o(),s("ngIf",!n.groupByTimeSlot.value&&e.length>0),o(),s("ngIf",e.length===0)}}function We(t,i){t&1&&(a(0,"div",148),d(1,"Cargando producci\xF3n..."),r())}var ce=class t{productionService=B(ae);productoService=B(de);refresh$=new N(void 0);updatingId=null;isRefreshing=!0;upcomingThresholdHours=4;showUpcomingList=!0;showFilters=!1;activeStatuses=["Pendiente","En Proceso"];familiaFilter=new D("");productoFilter=new D("");fechaFilter=new D(this.formatDate(new Date));selectedTimeSlots=[];groupByTimeSlot=new D(!0);familias$;filteredPedidos$;groupedPedidos$;upcomingPedidos$;counts$;constructor(){this.familias$=this.productoService.getProductos().pipe(I(i=>[...new Set(i.map(e=>e.familia))].sort()))}ngOnInit(){let i=this.refresh$.pipe(R(()=>{setTimeout(()=>this.isRefreshing=!0)}),H(()=>this.productionService.getPedidos().pipe(G(()=>{setTimeout(()=>this.isRefreshing=!1)}))),A(1)),e=$([i,this.familiaFilter.valueChanges.pipe(z(this.familiaFilter.value)),this.fechaFilter.valueChanges.pipe(z(this.fechaFilter.value)),this.refresh$.pipe(I(()=>this.selectedTimeSlots),z(this.selectedTimeSlots)),this.productoFilter.valueChanges.pipe(z(this.productoFilter.value))]).pipe(I(([n,c,p,C,v])=>n.filter(_=>!_.guardadoEnTienda||_.estado==="Entregado").filter(_=>_.estado!=="Cancelado").filter(_=>!c||_.producto.startsWith(c)||this.belongsToFamilia(_,c)).filter(_=>!v||_.producto.toLowerCase().includes(v.toLowerCase())).filter(_=>!p||this.formatDate(_.fechaEntrega)===p).filter(_=>{if(!C||C.length===0)return!0;let P=new Date(_.fechaEntrega).getHours(),O=new Date(_.fechaEntrega).getMinutes(),w=P*60+O;return C.some(T=>{switch(T){case"ma\xF1ana-primera":return w<11*60;case"mediodia":return w>=11*60&&w<14*60;case"tarde-primera":return w>=14*60&&w<16*60;case"tarde-ultima":return w>=16*60;default:return!0}})})),A(1));this.filteredPedidos$=e.pipe(I(n=>n.filter(c=>!!(this.activeStatuses.length===0||this.activeStatuses.includes(c.estado)||this.activeStatuses.includes("Terminado")&&c.estado==="Entregado")).sort((c,p)=>{let C=new Date(c.fechaEntrega).getTime(),v=new Date(p.fechaEntrega).getTime();return C-v}))),this.groupedPedidos$=$([this.filteredPedidos$,this.groupByTimeSlot.valueChanges.pipe(z(this.groupByTimeSlot.value))]).pipe(I(([n,c])=>this.groupPedidosByTimeSlot(n,!!c))),this.upcomingPedidos$=i.pipe(I(n=>{let c=new Date,p=new Date(c.getTime()+this.upcomingThresholdHours*60*60*1e3);return n.filter(C=>!C.guardadoEnTienda).filter(C=>C.estado==="Pendiente").filter(C=>{let v=new Date(C.fechaEntrega);return v>c&&v<=p}).sort((C,v)=>new Date(C.fechaEntrega).getTime()-new Date(v.fechaEntrega).getTime())})),this.counts$=e.pipe(I(n=>({falta:n.filter(c=>c.estado==="Pendiente").length,enCurso:n.filter(c=>c.estado==="En Proceso").length,terminado:n.filter(c=>c.estado==="Terminado"||c.estado==="Entregado").length}))),setInterval(()=>this.refresh$.next(),3e4)}groupPedidosByTimeSlot(i,e){let n=C=>{let v=new Map;return C.forEach(_=>{v.has(_.producto)||v.set(_.producto,{producto:_.producto,tallaGroups:[],totalCantidad:0,estadoGlobal:"Pendiente",isUrgent:!1});let P=v.get(_.producto);P.totalCantidad+=_.cantidad,this.isUrgent(_.fechaEntrega)&&(P.isUrgent=!0);let O=P.tallaGroups.find(T=>T.talla===_.talla);O||(O={talla:_.talla,totalCantidad:0,rellenoSummary:[],pedidos:[],estadoGlobal:"Pendiente",hasAnyNotes:!1},P.tallaGroups.push(O)),O.totalCantidad+=_.cantidad,O.pedidos.push(_),_.notasPastelero&&(O.hasAnyNotes=!0);let w=O.rellenoSummary.find(T=>T.relleno===_.relleno);w||(w={relleno:_.relleno,cantidad:0,hasNotes:!1},O.rellenoSummary.push(w)),w.cantidad+=_.cantidad,_.notasPastelero&&(w.hasNotes=!0)}),v.forEach(_=>{_.tallaGroups.forEach(P=>{P.pedidos.every(O=>O.estado==="Terminado"||O.estado==="Entregado")?P.estadoGlobal="Terminado":P.pedidos.some(O=>O.estado==="En Proceso")&&(P.estadoGlobal="En Proceso")}),_.tallaGroups.every(P=>P.estadoGlobal==="Terminado")?_.estadoGlobal="Terminado":_.tallaGroups.some(P=>P.estadoGlobal==="En Proceso")&&(_.estadoGlobal="En Proceso")}),Array.from(v.values())};if(!e)return i.length===0?[]:[{label:"Toda la producci\xF3n",productGroups:n(i)}];let c=[{label:"Primera Hora Ma\xF1ana (Hasta 11:00)",maxMinutes:11*60},{label:"Medio D\xEDa (Hasta 14:00)",maxMinutes:14*60},{label:"Primera Hora Tarde (Hasta 16:00)",maxMinutes:16*60},{label:"\xDAltima Hora Tarde (Hasta 24:00)",maxMinutes:24*60}],p=[];return c.forEach((C,v)=>{let _=v===0?0:c[v-1].maxMinutes,P=i.filter(O=>{let w=new Date(O.fechaEntrega),T=w.getHours()*60+w.getMinutes();return T>=_&&T<C.maxMinutes});P.length>0&&p.push({label:C.label,productGroups:n(P)})}),p}changeThreshold(i){this.upcomingThresholdHours=i,this.refresh$.next()}belongsToFamilia(i,e){return i.producto.toLowerCase().includes(e.toLowerCase())}isStatusActive(i){return this.activeStatuses.includes(i)}toggleTimeSlot(i){i===""?this.selectedTimeSlots=[]:this.selectedTimeSlots.includes(i)?this.selectedTimeSlots=this.selectedTimeSlots.filter(e=>e!==i):this.selectedTimeSlots=[...this.selectedTimeSlots,i],this.refresh$.next()}toggleStatus(i){this.activeStatuses.includes(i)?this.activeStatuses=this.activeStatuses.filter(e=>e!==i):this.activeStatuses=[...this.activeStatuses,i],this.refresh$.next()}changeDay(i){let e=this.fechaFilter.value;if(!e)return;let n=new Date(e);n.setDate(n.getDate()+i),this.fechaFilter.setValue(this.formatDate(n))}setToday(){this.fechaFilter.setValue(this.formatDate(new Date))}setFechaToPedido(i){this.fechaFilter.setValue(this.formatDate(i.fechaEntrega))}getTimeSlotLabel(i){switch(i){case"ma\xF1ana-primera":return"Hasta 11h";case"mediodia":return"Hasta 14h";case"tarde-primera":return"Hasta 16h";case"tarde-ultima":return"Hasta 24h";default:return"Cualquier hora"}}updateStatus(i,e){this.updatingId=i,this.productionService.updatePedidoStatus(i,e).subscribe({next:()=>{this.updatingId=null,this.refresh$.next()},error:n=>{alert(n.message),this.updatingId=null}})}hasPending(i){return i.pedidos.some(e=>e.estado==="Pendiente")}hasInProcess(i){return i.pedidos.some(e=>e.estado==="En Proceso")}countByStatus(i,e){return i.pedidos.filter(n=>n.estado===e).length}updateGroupStatus(i,e){let n=[];if(e==="En Proceso"?n=i.pedidos.filter(p=>p.estado==="Pendiente"):e==="Terminado"?(n=i.pedidos.filter(p=>p.estado==="En Proceso"),n.length===0&&(n=i.pedidos.filter(p=>p.estado==="Pendiente"))):e==="Pendiente"&&(n=i.pedidos.filter(p=>p.estado!=="Pendiente")),n.length===0)return;this.isRefreshing=!0;let c=n.map(p=>this.productionService.updatePedidoStatus(p.id,e));$(c).pipe(G(()=>this.isRefreshing=!1)).subscribe({next:()=>this.refresh$.next(),error:p=>alert("Error al actualizar el grupo: "+p.message)})}formatDate(i){if(!i)return"";let e=i instanceof Date?i:new Date(i);if(isNaN(e.getTime()))return"";let n=c=>c.toString().padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())}`}isToday(i){if(!i)return!1;let e=i instanceof Date?i:new Date(i);if(isNaN(e.getTime()))return!1;let n=new Date;return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}isUrgent(i){if(!i)return!1;let e=i instanceof Date?i:new Date(i);if(!this.isToday(e))return!1;let n=new Date;return(e.getTime()-n.getTime())/(1e3*60*60)<3}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=L({type:t,selectors:[["app-pedidos-obrador"]],standalone:!0,features:[q],decls:57,vars:37,consts:[["loading",""],[1,"obrador-container"],[1,"header"],[1,"header-actions"],[1,"threshold-wrapper"],[1,"threshold-label"],[1,"threshold-select",3,"change","value"],[3,"value"],[1,"auto-refresh"],[1,"dot"],[1,"quick-filters"],[1,"main-filter-row"],[1,"date-navigator"],[1,"btn-nav",3,"click"],[1,"calendar-wrapper"],["type","date",3,"formControl"],[1,"date-display"],[1,"timeslot-quick-nav"],[1,"ts-chip",3,"click"],[1,"toggle-group-wrapper"],[1,"toggle-btn",3,"click"],[1,"btn-more-filters",3,"click"],["class","extra-filters",4,"ngIf"],["class","status-summary-bar",4,"ngIf"],[4,"ngIf"],["class","production-groups",4,"ngIf","ngIfElse"],[1,"extra-filters"],[1,"filter-group"],["type","text","placeholder","Ej: Croissant, Tarta...",3,"formControl"],[3,"formControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","mini-status-chips",4,"ngIf"],[1,"mini-status-chips"],[1,"mini-chip",3,"click"],[1,"dot","red"],[1,"dot","blue"],[1,"dot","green"],[1,"status-summary-bar"],["class","status-chips-inline",4,"ngIf"],[1,"status-chips-inline"],[1,"status-item",3,"click"],[1,"indicator","red"],[1,"indicator","blue"],[1,"indicator","green"],["class","alerts-section",4,"ngIf"],[1,"alerts-section"],[1,"alert-header",3,"click"],[1,"alert-icon"],[1,"chevron"],["class","upcoming-scroll",4,"ngIf"],[1,"upcoming-scroll"],["class","upcoming-mini-card",3,"click",4,"ngFor","ngForOf"],[1,"upcoming-mini-card",3,"click"],[1,"time"],[1,"name"],[1,"qty"],[1,"production-groups"],["class","empty-state",4,"ngIf"],["class","timeslot-group",4,"ngFor","ngForOf"],[1,"timeslot-group"],[1,"timeslot-header"],[1,"badge"],[1,"production-grid"],["class","product-group-card",3,"in-process","urgent","finished",4,"ngFor","ngForOf"],[1,"product-group-card"],[1,"product-group-header"],[1,"total-badge"],[1,"unit"],[1,"product-info"],[1,"talla-groups-container"],["class","talla-subgroup",3,"in-process","finished",4,"ngFor","ngForOf"],[1,"talla-subgroup"],[1,"talla-header"],[1,"talla-info"],[1,"talla-label"],[1,"rellenos-breakdown"],[4,"ngFor","ngForOf"],[1,"talla-qty-badge"],[1,"orders-container"],["class","order-item",3,"urgent",4,"ngFor","ngForOf"],["class","relleno-tag",3,"with-note",4,"ngIf"],[1,"relleno-tag"],["class","mini-note-dot",4,"ngIf"],[1,"mini-note-dot"],[1,"order-item"],[1,"order-main"],[1,"client"],[1,"actions"],[1,"btn-detail-toggle",3,"click"],["class","btn-action start",3,"disabled","click",4,"ngIf"],["class","btn-action finish",3,"disabled","click",4,"ngIf"],["class","done-mark",4,"ngIf"],["class","notes",4,"ngIf"],[1,"btn-action","start",3,"click","disabled"],[1,"btn-action","finish",3,"click","disabled"],[1,"done-mark"],[1,"notes"],["class","detail-relleno-text",4,"ngIf"],[1,"detail-relleno-text"],[1,"table-view-container"],[1,"production-table"],[1,"text-center"],[1,"td-product"],[1,"td-talla"],[1,"talla-main"],["class","note-warning-dot","title","Tiene notas",4,"ngIf"],[1,"td-total","text-center"],[1,"td-relleno"],[1,"table-rellenos"],[1,"td-actions"],[1,"table-group-actions"],["title","Ver desglose de pedidos",1,"btn-toggle-notes",3,"click"],["class","btn-t-action start",3,"click",4,"ngIf"],["class","btn-t-action finish",3,"click",4,"ngIf"],["class","done-check",4,"ngIf"],["title","Tiene notas",1,"note-warning-dot"],["class","table-r-badge",3,"r-note",4,"ngIf"],[1,"table-r-badge"],[1,"btn-t-action","start",3,"click"],[1,"btn-t-action","finish",3,"click"],[1,"done-check"],["title","Revertir a pendiente",1,"btn-undo",3,"click"],["class","tr-order-detail",3,"urgent",4,"ngFor","ngForOf"],[1,"tr-order-detail"],["colspan","5"],[1,"order-detail-content"],[1,"d-header-row"],[1,"d-p-name"],[1,"d-p-talla"],["class","d-p-relleno",4,"ngIf"],[1,"d-p-qty"],["class","d-note-row",4,"ngIf"],[1,"d-footer-row"],[1,"d-client-info"],[1,"d-p-time"],[1,"d-p-client"],[1,"d-p-actions"],["class","btn-mini-action start",3,"click",4,"ngIf"],["class","btn-mini-action finish",3,"click",4,"ngIf"],["class","done-mark-mini",4,"ngIf"],[1,"d-p-relleno"],[1,"d-note-row"],[1,"d-note-text"],[1,"btn-mini-action","start",3,"click"],[1,"btn-mini-action","finish",3,"click"],[1,"done-mark-mini"],[1,"empty-state"],[1,"loading-state"]],template:function(e,n){if(e&1){let c=M();a(0,"div",1)(1,"div",2)(2,"h2"),d(3,"Producci\xF3n de Obrador"),r(),a(4,"div",3)(5,"div",4)(6,"span",5),d(7,"Alertas pr\xF3ximas:"),r(),a(8,"select",6),u("change",function(C){return m(c),f(n.changeThreshold(+C.target.value))}),a(9,"option",7),d(10,"2h"),r(),a(11,"option",7),d(12,"4h"),r(),a(13,"option",7),d(14,"8h"),r(),a(15,"option",7),d(16,"24h"),r()()(),a(17,"div",8),S(18,"span",9),d(19," Auto-refresh 30s "),r()()(),a(20,"div",10)(21,"div",11)(22,"div",12)(23,"button",13),u("click",function(){return m(c),f(n.changeDay(-1))}),d(24,"\u2039"),r(),a(25,"div",14),S(26,"input",15),a(27,"span",16),d(28),y(29,"date"),r()(),a(30,"button",13),u("click",function(){return m(c),f(n.changeDay(1))}),d(31,"\u203A"),r()(),a(32,"div",17)(33,"button",18),u("click",function(){return m(c),f(n.toggleTimeSlot(""))}),d(34," Todo "),r(),a(35,"button",18),u("click",function(){return m(c),f(n.toggleTimeSlot("ma\xF1ana-primera"))}),d(36," -11h "),r(),a(37,"button",18),u("click",function(){return m(c),f(n.toggleTimeSlot("mediodia"))}),d(38," -14h "),r(),a(39,"button",18),u("click",function(){return m(c),f(n.toggleTimeSlot("tarde-primera"))}),d(40," -16h "),r(),a(41,"button",18),u("click",function(){return m(c),f(n.toggleTimeSlot("tarde-ultima"))}),d(42," -24h "),r()(),a(43,"div",19)(44,"button",20),u("click",function(){return m(c),f(n.groupByTimeSlot.setValue(!n.groupByTimeSlot.value))}),d(45),r()(),a(46,"button",21),u("click",function(){return m(c),f(n.showFilters=!n.showFilters)}),a(47,"span"),d(48),r()()(),g(49,pe,18,8,"div",22),r(),g(50,ge,3,3,"div",23)(51,xe,2,1,"ng-container",24),y(52,"async"),g(53,Ze,4,3,"div",25),y(54,"async"),g(55,We,2,0,"ng-template",null,0,j),r()}if(e&2){let c=U(56);o(8),s("value",n.upcomingThresholdHours),o(),s("value",2),o(2),s("value",4),o(2),s("value",8),o(2),s("value",24),o(3),x("active",n.isRefreshing),o(8),s("formControl",n.fechaFilter),o(2),b(n.isToday(n.fechaFilter.value)?"HOY":V(29,30,n.fechaFilter.value,"dd/MM")),o(5),x("active",n.selectedTimeSlots.length===0),o(2),x("active",n.selectedTimeSlots.includes("ma\xF1ana-primera")),o(2),x("active",n.selectedTimeSlots.includes("mediodia")),o(2),x("active",n.selectedTimeSlots.includes("tarde-primera")),o(2),x("active",n.selectedTimeSlots.includes("tarde-ultima")),o(3),x("active",n.groupByTimeSlot.value),o(),h(" ",n.groupByTimeSlot.value?"\u{1F4C2} POR FRANJAS":"\u{1F4C4} LISTA \xDANICA"," "),o(),x("active",n.showFilters),o(2),b(n.showFilters?"\u2716":"\u{1F50D}"),o(),s("ngIf",n.showFilters),o(),s("ngIf",!n.showFilters),o(),s("ngIf",F(52,33,n.upcomingPedidos$)),o(2),s("ngIf",F(54,35,n.groupedPedidos$))("ngIfElse",c)}},dependencies:[K,Y,J,Z,W,re,ie,oe,X,ne,ee,te,Q],styles:['@charset "UTF-8";.obrador-container[_ngcontent-%COMP%]{padding:20px;background:#f0f2f5;min-height:100vh}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#1e293b;font-weight:800}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap}.threshold-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#fff;padding:.4rem .8rem;border-radius:8px;border:1px solid #e2e8f0;box-shadow:0 1px 2px #0000000d}.threshold-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:700;color:#64748b;text-transform:uppercase}.threshold-select[_ngcontent-%COMP%]{border:none;background:transparent;font-size:.85rem;font-weight:700;color:#1e293b;cursor:pointer;padding:0;width:auto;height:auto}.threshold-select[_ngcontent-%COMP%]:focus{outline:none}.auto-refresh[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;display:flex;align-items:center;gap:6px;font-weight:600;background:#f1f5f9;padding:.4rem .8rem;border-radius:8px}.dot[_ngcontent-%COMP%]{width:8px;height:8px;background:#cbd5e1;border-radius:50%}.dot.active[_ngcontent-%COMP%]{background:#22c55e;box-shadow:0 0 8px #22c55e66;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.6}to{transform:scale(1);opacity:1}}.quick-filters[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:16px;margin-bottom:25px;box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -1px #00000008;border:1px solid #e2e8f0}.main-filter-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.date-navigator[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f8fafc;border-radius:12px;padding:4px;border:1px solid #e2e8f0;transition:all .2s}.date-navigator[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;background:#f1f5f9}.calendar-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;min-width:100px;padding:0 10px}.calendar-wrapper[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{position:absolute;opacity:0;width:100%;height:100%;cursor:pointer}.date-display[_ngcontent-%COMP%]{font-weight:800;color:#1e293b;font-size:1rem;text-transform:uppercase}.timeslot-quick-nav[_ngcontent-%COMP%]{display:flex;gap:6px;flex-grow:1;overflow-x:auto;padding-bottom:4px}.ts-chip[_ngcontent-%COMP%]{background:#f1f5f9;border:1px solid #e2e8f0;padding:8px 16px;border-radius:10px;font-size:.85rem;font-weight:700;color:#64748b;cursor:pointer;white-space:nowrap;transition:all .2s cubic-bezier(.4,0,.2,1)}.ts-chip[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#1e293b}.ts-chip.active[_ngcontent-%COMP%]{background:#1e293b;color:#fff;border-color:#1e293b;box-shadow:0 8px 15px -3px #1e293b4d;transform:translateY(-1px)}.toggle-group-wrapper[_ngcontent-%COMP%]{margin:0 5px}.toggle-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;padding:8px 16px;border-radius:50px;font-size:.8rem;font-weight:800;color:#64748b;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);white-space:nowrap;min-height:44px;display:flex;align-items:center;gap:8px}.toggle-btn[_ngcontent-%COMP%]:hover{background:#f8fafc;border-color:#cbd5e1;transform:translateY(-1px)}.toggle-btn.active[_ngcontent-%COMP%]{background:#f1f5f9;color:#1e293b;border-color:#cbd5e1;box-shadow:inset 0 2px 4px #0000000d}.btn-more-filters[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;background:#f8fafc;border:1px solid #e2e8f0;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.2rem}.btn-more-filters.active[_ngcontent-%COMP%]{background:#fee2e2;color:#ef4444;border-color:#fecaca}.extra-filters[_ngcontent-%COMP%]{margin-top:15px;padding-top:15px;border-top:1px dashed #e2e8f0;display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.75rem;font-weight:700;color:#64748b;margin-bottom:6px;text-transform:uppercase}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 15px;border-radius:10px;border:1px solid #e2e8f0;background:#f8fafc;font-size:.9rem;font-weight:600;color:#1e293b;box-sizing:border-box}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff}.mini-status-chips[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.mini-chip[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;padding:6px 12px;border-radius:8px;font-size:.8rem;font-weight:600;display:flex;align-items:center;gap:6px;cursor:pointer;width:auto;min-height:unset}.mini-chip.active[_ngcontent-%COMP%]{background:#fff;border-color:#3b82f6;box-shadow:0 0 0 1px #3b82f6}.dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.dot.red[_ngcontent-%COMP%]{background:#ef4444}.dot.blue[_ngcontent-%COMP%]{background:#3b82f6}.dot.green[_ngcontent-%COMP%]{background:#22c55e}.status-summary-bar[_ngcontent-%COMP%]{margin-bottom:25px}.status-chips-inline[_ngcontent-%COMP%]{display:flex;gap:24px;background:#1e293b;padding:12px 24px;border-radius:16px;color:#fff;box-shadow:0 10px 15px -3px #0000001a}.status-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:.95rem;opacity:.7;cursor:pointer;transition:all .2s}.status-item[_ngcontent-%COMP%]:hover{opacity:.9}.status-item.active[_ngcontent-%COMP%]{opacity:1;transform:scale(1.05)}.status-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.2rem;font-family:JetBrains Mono,monospace}.indicator[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:4px}.indicator.red[_ngcontent-%COMP%]{background:#e11d48}.indicator.blue[_ngcontent-%COMP%]{background:#3b82f6}.indicator.green[_ngcontent-%COMP%]{background:#10b981}.table-view-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px -1px #0000000d,0 2px 4px -1px #00000008;border:1px solid #eef2f6}.production-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.production-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;padding:16px 20px;text-align:left;font-weight:800;color:#94a3b8;font-size:.7rem;text-transform:uppercase;letter-spacing:.12em;border-bottom:1px solid #f1f5f9;white-space:nowrap}.production-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:24px 20px;border-bottom:1px solid #f1f5f9;vertical-align:middle;transition:all .2s}.tr-urgent[_ngcontent-%COMP%]{background:#fff1f2}.tr-finished[_ngcontent-%COMP%]{opacity:.6}.td-product[_ngcontent-%COMP%]{font-weight:800;color:#0f172a;font-size:1.25rem;border-left:4px solid #3b82f6;width:180px}.td-talla[_ngcontent-%COMP%]{font-weight:800;color:#1e293b;font-size:1rem;width:140px}.td-total[_ngcontent-%COMP%]{font-size:2.5rem;color:#c2410c;font-weight:700;width:100px;text-align:center;font-family:JetBrains Mono,monospace}.table-rellenos[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.table-r-badge[_ngcontent-%COMP%]{background:#fff;padding:6px 14px;border-radius:20px;font-size:.85rem;font-weight:700;border:1.5px solid #fed7aa;color:#7c2d12}.table-r-badge[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#f97316;margin-left:4px}.talla-main[_ngcontent-%COMP%]{font-weight:800;display:flex;align-items:center;gap:8px}.note-warning-dot[_ngcontent-%COMP%]{font-size:1.1rem;animation:_ngcontent-%COMP%_nudge 2s linear infinite;display:inline-block}@keyframes _ngcontent-%COMP%_nudge{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.btn-toggle-notes[_ngcontent-%COMP%], .btn-detail-toggle[_ngcontent-%COMP%]{background:#f1f5f9;border:1px solid #e2e8f0;color:#475569;padding:12px 24px;border-radius:50px;font-size:.8rem;font-weight:800;cursor:pointer;text-transform:uppercase;letter-spacing:.05em;transition:all .2s cubic-bezier(.4,0,.2,1);box-shadow:0 1px 3px #0000000d;display:inline-flex;align-items:center;justify-content:center;gap:6px;white-space:nowrap;min-height:46px;min-width:160px}.btn-detail-toggle[_ngcontent-%COMP%]{margin-right:5px}.btn-toggle-notes[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translateY(-1px)}.btn-toggle-notes.active[_ngcontent-%COMP%]{background:#475569;color:#fff;border-color:#475569}.tr-order-detail[_ngcontent-%COMP%]{background:#f8fbff}.tr-order-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0!important;border-bottom:2px solid #e2e8f0}.order-detail-content[_ngcontent-%COMP%]{padding:15px 20px;display:flex;flex-direction:column;gap:12px}.d-header-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-wrap:wrap}.d-p-name[_ngcontent-%COMP%]{font-weight:700;color:#64748b;font-size:.9rem;text-transform:uppercase}.d-p-talla[_ngcontent-%COMP%]{font-weight:800;color:#1e293b;font-size:1rem}.d-p-relleno[_ngcontent-%COMP%]{background:#fff;border:1px solid #fed7aa;color:#c2410c;padding:4px 12px;border-radius:20px;font-weight:700;font-size:.85rem}.d-p-qty[_ngcontent-%COMP%]{background:#be185d;color:#fff;padding:4px 12px;border-radius:8px;font-weight:900;font-size:1.1rem;font-family:JetBrains Mono,monospace}.d-note-row[_ngcontent-%COMP%]{background:#fffbeb;border-left:4px solid #f59e0b;padding:8px 15px;border-radius:4px}.d-note-text[_ngcontent-%COMP%]{color:#92400e;font-weight:600;font-size:.9rem}.d-footer-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-top:1px dashed #e2e8f0;padding-top:10px}.d-client-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.d-p-time[_ngcontent-%COMP%]{font-weight:900;color:#64748b;font-size:1.1rem;font-family:JetBrains Mono,monospace}.d-p-client[_ngcontent-%COMP%]{font-weight:700;color:#1e293b;font-size:1rem}.d-p-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.btn-mini-action[_ngcontent-%COMP%]{padding:6px 14px;border-radius:50px;font-weight:800;font-size:.65rem;border:none;cursor:pointer;text-transform:uppercase;transition:all .2s cubic-bezier(.4,0,.2,1);color:#fff;box-shadow:0 2px 4px #0000001a}.btn-mini-action.start[_ngcontent-%COMP%]{background:#3b82f6}.btn-mini-action.start[_ngcontent-%COMP%]:hover{background:#2563eb;transform:scale(1.05)}.btn-mini-action.finish[_ngcontent-%COMP%]{background:#10b981}.btn-mini-action.finish[_ngcontent-%COMP%]:hover{background:#059669;transform:scale(1.05)}.done-mark-mini[_ngcontent-%COMP%]{color:#16a34a;font-weight:950;font-size:1.1rem;margin-right:10px}.table-group-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:flex-end}.btn-t-action[_ngcontent-%COMP%]{padding:12px 24px;border-radius:50px;border:none;font-weight:800;font-size:.8rem;text-transform:uppercase;letter-spacing:.05em;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);color:#fff;box-shadow:0 4px 12px #0000001a;min-width:160px;min-height:46px;display:inline-flex;align-items:center;justify-content:center;gap:8px}.btn-t-action.start[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);box-shadow:0 4px 14px #2563eb4d}.btn-t-action.start[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1d4ed8);transform:translateY(-2px);box-shadow:0 6px 20px #2563eb66}.btn-t-action.finish[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);box-shadow:0 4px 14px #0596694d}.btn-t-action.finish[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);transform:translateY(-2px);box-shadow:0 6px 20px #05966966}.btn-undo[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;color:#64748b;border-radius:6px;padding:4px 8px;cursor:pointer;font-size:.8rem;margin-left:10px;transition:all .2s}.btn-undo[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#0f172a;border-color:#cbd5e1}.done-check[_ngcontent-%COMP%]{color:#15803d;font-weight:900;font-size:.85rem;display:flex;align-items:center;justify-content:center;gap:6px;background:#f0fdf4;padding:8px;border-radius:10px}.text-center[_ngcontent-%COMP%]{text-align:center}.alerts-section[_ngcontent-%COMP%]{background:#fff5f5;border:1px solid #feb2b2;border-radius:12px;margin-bottom:25px;overflow:hidden}.alert-header[_ngcontent-%COMP%]{padding:12px 20px;display:flex;align-items:center;gap:12px;cursor:pointer;background:#fff5f5}.alert-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#c53030;flex-grow:1}.alert-icon[_ngcontent-%COMP%]{font-size:1.2rem}.chevron[_ngcontent-%COMP%]{color:#c53030;font-size:.8rem}.upcoming-scroll[_ngcontent-%COMP%]{display:flex;gap:12px;padding:0 15px 15px;overflow-x:auto;scroll-behavior:smooth}.upcoming-mini-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #feb2b2;border-left:4px solid #f56565;padding:10px 15px;border-radius:8px;min-width:200px;display:flex;flex-direction:column;gap:2px;cursor:pointer;transition:background .2s}.upcoming-mini-card[_ngcontent-%COMP%]:hover{background:#fffaf0}.upcoming-mini-card[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-weight:900;color:#c53030;font-size:1.1rem}.upcoming-mini-card[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#2d3748;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.upcoming-mini-card[_ngcontent-%COMP%]   .qty[_ngcontent-%COMP%]{font-size:.8rem;color:#718096}.timeslot-group[_ngcontent-%COMP%]{margin-bottom:2rem}.timeslot-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid #e2e8f0}.timeslot-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:800;color:#1e293b;text-transform:uppercase;letter-spacing:.05em}.timeslot-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;padding:2px 10px;border-radius:20px;font-size:.75rem;font-weight:700}.production-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.product-group-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;overflow:hidden;display:flex;flex-direction:column;border-top:6px solid #95a5a6;transition:transform .2s}.product-group-card.in-process[_ngcontent-%COMP%]{border-top-color:#3498db}.product-group-card.urgent[_ngcontent-%COMP%]{border-top-color:#e74c3c;animation:_ngcontent-%COMP%_border-pulse 2s infinite}.product-group-card.finished[_ngcontent-%COMP%]{border-top-color:#2ecc71;opacity:.8}@keyframes _ngcontent-%COMP%_border-pulse{0%{border-top-color:#e74c3c}50%{border-top-color:#ff7675}to{border-top-color:#e74c3c}}.product-group-header[_ngcontent-%COMP%]{padding:15px;display:flex;align-items:center;gap:15px;background:#f8fafc;border-bottom:1px solid #e2e8f0}.total-badge[_ngcontent-%COMP%]{background:#d35400;color:#fff;min-width:60px;height:60px;border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;box-shadow:0 4px 6px #d3540033}.total-badge[_ngcontent-%COMP%]   .qty[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:800;line-height:1}.total-badge[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase}.product-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;color:#1e293b;line-height:1.2}.talla-groups-container[_ngcontent-%COMP%]{background:#fff}.talla-subgroup[_ngcontent-%COMP%]{border-bottom:2px solid #f1f5f9}.talla-subgroup[_ngcontent-%COMP%]:last-child{border-bottom:none}.talla-subgroup.in-process[_ngcontent-%COMP%]{background:#eff6ff}.talla-subgroup.finished[_ngcontent-%COMP%]{background:#f0fdf4;opacity:.8}.talla-header[_ngcontent-%COMP%]{padding:10px 15px;background:#fdfcfb;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #f1f5f9}.talla-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.talla-label[_ngcontent-%COMP%]{font-size:.95rem;font-weight:800;color:#7c2d12;text-transform:uppercase}.note-indicator[_ngcontent-%COMP%]{color:#d97706;font-size:.8rem;margin-left:4px;vertical-align:middle}.rellenos-breakdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;margin-top:2px}.relleno-tag[_ngcontent-%COMP%]{font-size:.75rem;color:#9a3412;background:#fff;padding:1px 6px;border-radius:4px;border:1px solid #ffedd5;display:flex;align-items:center;gap:3px}.relleno-tag.with-note[_ngcontent-%COMP%]{border-color:#fbbf24;background:#fffbeb}.mini-note-dot[_ngcontent-%COMP%]{color:#d97706;font-size:.6rem}.talla-qty-badge[_ngcontent-%COMP%]{background:#fff;color:#9a3412;padding:2px 8px;border-radius:6px;font-size:.85rem;font-weight:800;border:1px solid #ffedd5}.orders-container[_ngcontent-%COMP%]{padding:10px;background:#fff;max-height:400px;overflow-y:auto}.order-item[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #f1f5f9}.order-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.order-item.urgent[_ngcontent-%COMP%]{background:#fff5f5;border-left:4px solid #ef4444;border-radius:4px}.order-main[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.order-main[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-weight:800;color:#64748b;font-family:JetBrains Mono,monospace;font-size:.9rem}.order-main[_ngcontent-%COMP%]   .qty[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:800;color:#d35400;background:#fff7ed;padding:2px 8px;border-radius:6px;border:1px solid #ffedd5}.order-main[_ngcontent-%COMP%]   .client[_ngcontent-%COMP%]{font-weight:700;color:#1e293b;font-size:.95rem;flex-grow:1}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-left:auto}.btn-action[_ngcontent-%COMP%]{padding:6px 12px;font-size:.75rem;border-radius:6px;min-height:32px;width:auto}.btn-action.start[_ngcontent-%COMP%]{background:#3498db;color:#fff}.btn-action.finish[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.done-mark[_ngcontent-%COMP%]{color:#2ecc71;font-weight:700;font-size:1.2rem}.order-item[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{margin-top:5px;padding:6px 10px;background:#fef9c3;border-radius:6px;font-size:.85rem;color:#854d0e;border-left:3px solid #facc15}.detail-relleno-text[_ngcontent-%COMP%]{color:#9d174d;font-weight:700;margin-bottom:2px}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{grid-column:1/-1;padding:50px;text-align:center;background:#fff;border-radius:12px;color:#666}@media (max-width: 992px){.td-total[_ngcontent-%COMP%]{font-size:1.8rem;width:80px}.talla-notes[_ngcontent-%COMP%]{min-width:350px}}@media (max-width: 768px){.obrador-container[_ngcontent-%COMP%]{padding:8px}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px;margin-bottom:1rem}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between;gap:8px}.quick-filters[_ngcontent-%COMP%]{padding:10px;margin-bottom:15px;border-radius:12px}.main-filter-row[_ngcontent-%COMP%]{gap:8px}.date-navigator[_ngcontent-%COMP%]{padding:2px}.ts-chip[_ngcontent-%COMP%]{padding:5px 10px;font-size:.75rem}.toggle-btn[_ngcontent-%COMP%]{padding:5px 10px;font-size:.7rem;min-height:38px}.status-chips-inline[_ngcontent-%COMP%]{padding:8px 12px;gap:12px;border-radius:12px}.status-item[_ngcontent-%COMP%]{font-size:.8rem;gap:6px}.status-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.95rem}.production-table[_ngcontent-%COMP%], .production-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .production-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .production-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .production-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block}.production-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.production-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(.tr-order-detail){margin-bottom:12px;border:1px solid #eef2f6;border-radius:12px;background:#fff;padding:12px;display:flex!important;flex-wrap:wrap;align-items:center;position:relative}.production-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none!important;padding:4px 0!important;width:auto!important;background:transparent!important}.td-product[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:800;color:#0f172a;margin-right:8px!important;padding:0!important}.td-product[_ngcontent-%COMP%]:before{display:none}.td-talla[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:800;color:#1e293b;margin-right:0!important;padding:0!important;display:flex!important;align-items:center}.td-total[_ngcontent-%COMP%]{margin-left:auto!important;font-size:1.8rem!important;width:auto!important;text-align:right;color:#c2410c;padding:0!important;font-family:JetBrains Mono,monospace}.td-relleno[_ngcontent-%COMP%]{flex:0 0 100%;margin:8px 0!important}.table-r-badge[_ngcontent-%COMP%]{padding:4px 10px;font-size:.75rem}.td-actions[_ngcontent-%COMP%]{flex:0 0 100%;border-top:1px solid #f1f5f9!important;margin-top:8px!important;padding:12px 0 0!important;width:100%!important;display:block!important}.table-group-actions[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:8px;align-items:center;width:100%;display:flex!important}.btn-toggle-notes[_ngcontent-%COMP%], .btn-t-action[_ngcontent-%COMP%]{flex:1;min-width:0;padding:12px 10px!important;font-size:.75rem!important;height:48px;display:flex;align-items:center;justify-content:center;text-align:center}.tr-order-detail[_ngcontent-%COMP%]{margin:5px 0 12px;border-radius:12px;border:1px solid #eef2f6;padding:0;background:#fff;box-shadow:0 4px 6px #00000008;display:block!important;width:100%!important}.order-detail-content[_ngcontent-%COMP%]{padding:16px;gap:12px}.d-header-row[_ngcontent-%COMP%]{gap:10px}.d-p-qty[_ngcontent-%COMP%]{font-size:1rem;padding:2px 8px}.d-p-time[_ngcontent-%COMP%]{font-size:.95rem}.d-p-client[_ngcontent-%COMP%]{font-size:.9rem}.talla-notes[_ngcontent-%COMP%]{min-width:100%;margin-top:10px;padding:10px}}@media (max-width: 480px){.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.date-navigator[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.calendar-wrapper[_ngcontent-%COMP%]{flex-grow:1}.btn-more-filters[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:8px;margin-top:5px}.chip-label[_ngcontent-%COMP%]{display:block;font-size:.9rem}.chip-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:32px;height:32px}}']})};export{ce as PedidosObradorComponent};
