import{a as m,b as g}from"./chunk-Y5J44TVU.js";import{a as p,b as c,g as o,h as a,k as i,p as h,pa as u,qa as f,s as l}from"./chunk-ROLQTBHD.js";var E=class d{http=l(f);adapter=l(m);apiUrl=g.apiUrl;getDashboardStats(){return this.http.get(this.apiUrl).pipe(a(r=>{if(r.status==="error")throw new Error(r.message||"Error desconocido en el servidor de datos.");return this.adapter.adaptStats(r)}),i(r=>{console.error("Error fetching production stats:",r);let e=r instanceof Error?r.message:"No se pudo cargar la informaci\xF3n de producci\xF3n. Por favor, compruebe la configuraci\xF3n del script.";return o(()=>new Error(e))}))}getPedidos(){return this.http.get(this.apiUrl).pipe(a(r=>{if(r.status==="error")throw new Error(r.message||"Error al cargar los pedidos.");return this.adapter.adaptPedidos(r)}),i(r=>(console.error("Error fetching pedidos:",r),o(()=>new Error("No se pudieron cargar los pedidos.")))))}addPedido(r){let e=c(p({},r),{id:r.id||crypto.randomUUID()}),s=c(p({},this.adapter.prepareForPost(e)),{action:"add"}),n=new u({"Content-Type":"text/plain;charset=utf-8"});return this.http.post(this.apiUrl,JSON.stringify(s),{headers:n}).pipe(a(t=>{if(t.status==="error")throw new Error(t.message||"Error al guardar el pedido.");return t}),i(t=>{console.error("Error adding pedido:",t);let w=t instanceof Error?t.message:"No se pudo guardar el pedido. Por favor, int\xE9ntelo de nuevo.";return o(()=>new Error(w))}))}updatePedidoStatus(r,e){let s={action:"updateStatus",id:r,estado:e},n=new u({"Content-Type":"text/plain;charset=utf-8"});return this.http.post(this.apiUrl,JSON.stringify(s),{headers:n}).pipe(a(t=>{if(t.status==="error")throw new Error(t.message||"Error al actualizar el estado.");return t}),i(t=>(console.error("Error updating status:",t),o(()=>new Error("No se pudo actualizar el estado del pedido.")))))}static \u0275fac=function(e){return new(e||d)};static \u0275prov=h({token:d,factory:d.\u0275fac,providedIn:"root"})};export{E as a};
