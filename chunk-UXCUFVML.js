import{a as j,b as F}from"./chunk-7KV3VHTG.js";import{a as H}from"./chunk-N5YNCOG6.js";import{a as R}from"./chunk-GBLNJP7S.js";import{a as U}from"./chunk-POPWOB4M.js";import{a as L}from"./chunk-UWCFH2GT.js";import"./chunk-CMYXJOK7.js";import{e as N,k as $}from"./chunk-PY7FXQZV.js";import{K as P,Ka as s,Lb as D,Na as c,Nb as T,Pb as z,Qa as a,Ra as t,Sa as v,Tb as V,Ub as A,V as b,Va as O,Wa as h,Wb as B,Xa as p,Z as w,bb as y,cb as d,db as x,eb as m,ga as f,ha as u,hb as S,j as I,lb as _,mb as M,nb as E,pb as k,q as C,za as i}from"./chunk-CMV2EMBO.js";function G(n,o){if(n&1&&(a(0,"span",22),d(1),t()),n&2){let e=p().ngIf;i(),m("(",e.talla,")")}}function J(n,o){if(n&1&&(a(0,"div",23),d(1," RELLENO: "),a(2,"strong"),d(3),t()()),n&2){let e=p().ngIf;i(3),x(e.relleno)}}function K(n,o){if(n&1&&(a(0,"div",13)(1,"label"),d(2,"Atendido por"),t(),a(3,"div",14),v(4,"app-vendedor-badge",24),t()()),n&2){let e=p().ngIf;i(4),c("vendedor",e.vendedor)}}function Q(n,o){n&1&&(a(0,"div",25),d(1," Pedido finalizado por obrador \u2713 "),t())}function W(n,o){n&1&&(a(0,"div",26),d(1," ESTE PEDIDO HA SIDO CANCELADO "),t())}function X(n,o){if(n&1){let e=O();a(0,"div",4)(1,"div",5)(2,"div",6),_(3,"pedidoStatusClass"),d(4),t(),a(5,"div",7)(6,"div",8),d(7),t(),a(8,"div",9),d(9),s(10,G,2,1,"span",10),t(),s(11,J,4,1,"div",11),t(),a(12,"div",12)(13,"div",13)(14,"label"),d(15,"Cliente"),t(),a(16,"div",14),d(17),t()(),a(18,"div",13)(19,"label"),d(20,"Hora de Entrega"),t(),a(21,"div",15),d(22),_(23,"date"),t()(),s(24,K,5,1,"div",16),t(),v(25,"app-pedido-notes",17),a(26,"app-pedido-actions",18),h("start",function(){let l=f(e).ngIf,g=p();return u(g.updateStatus(l.id,"En Proceso"))})("finish",function(){let l=f(e).ngIf,g=p();return u(g.updateStatus(l.id,"Terminado"))})("cancel",function(){let l=f(e).ngIf,g=p();return u(g.cancelarPedido(l))}),t(),s(27,Q,2,0,"div",19)(28,W,2,0,"div",20),a(29,"div",21)(30,"small"),d(31),t(),a(32,"small"),d(33),_(34,"date"),t()()()()}if(n&2){let e=o.ngIf,r=p();i(2),c("ngClass",M(3,17,e.estado)),i(2),m(" Estado Actual: ",e.estado," "),i(3),m("",e.cantidad,"u."),i(2),m(" ",e.producto," "),i(),c("ngIf",e.talla),i(),c("ngIf",e.relleno),i(6),x(e.nombreCliente||"-"),i(5),x(E(23,19,e.fechaEntrega,"HH:mm")),i(2),c("ngIf",e.vendedor),i(),c("notasPastelero",e.notasPastelero)("notasTienda",e.notasTienda),i(),c("estado",e.estado)("isUpdating",r.isUpdating),i(),c("ngIf",e.estado==="Terminado"||e.estado==="Entregado"),i(),c("ngIf",e.estado==="Cancelado"),i(3),m("ID: ",e.id,""),i(2),m("Entrega: ",E(34,22,e.fechaEntrega,"dd/MM/yyyy"),"")}}function Y(n,o){n&1&&(a(0,"div",27),d(1,"Cargando datos de producci\xF3n..."),t())}var q=class n{route=b(N);location=b(D);productionService=b(L);refresh$=new I(void 0);pedido$;isUpdating=!1;ngOnInit(){this.pedido$=this.refresh$.pipe(P(()=>this.route.paramMap),C(o=>o.get("id")),P(o=>o?this.productionService.getPedidos().pipe(C(e=>e.find(r=>r.id===o))):[void 0]))}cancelarPedido(o){confirm(`\xBFEst\xE1s seguro de que deseas CANCELAR este producto (${o.cantidad} ${o.producto})?`)&&this.updateStatus(o.id,"Cancelado")}updateStatus(o,e){this.isUpdating=!0,this.productionService.updatePedidoStatus(o,e).subscribe({next:()=>{this.isUpdating=!1,this.refresh$.next()},error:r=>{alert(r.message),this.isUpdating=!1}})}goBack(){this.location.back()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-obrador-pedido-detail"]],standalone:!0,features:[S],decls:6,vars:4,consts:[["loading",""],[1,"detail-container"],["title","Control de Producci\xF3n","backText","\u2190 Volver a Obrador",3,"back"],["class","content",4,"ngIf","ngIfElse"],[1,"content"],[1,"card"],[1,"status-banner",3,"ngClass"],[1,"main-info"],[1,"qty"],[1,"product"],["class","talla-text",4,"ngIf"],["class","relleno-box",4,"ngIf"],[1,"info-grid"],[1,"info-group"],[1,"value"],[1,"value","highlight"],["class","info-group",4,"ngIf"],["mode","dual","pasteleroLabel","Instrucciones de Obrador","tiendaLabel","Comentario de Tienda",3,"notasPastelero","notasTienda"],["mode","obrador",3,"start","finish","cancel","estado","isUpdating"],["class","done-message",4,"ngIf"],["class","cancelled-message",4,"ngIf"],[1,"metadata"],[1,"talla-text"],[1,"relleno-box"],[3,"vendedor"],[1,"done-message"],[1,"cancelled-message"],[1,"loading-state"]],template:function(e,r){if(e&1){let l=O();a(0,"div",1)(1,"app-pedidos-header",2),h("back",function(){return f(l),u(r.goBack())}),t(),s(2,X,35,25,"div",3),_(3,"async"),s(4,Y,2,0,"ng-template",null,0,k),t()}if(e&2){let l=y(5);i(2),c("ngIf",M(3,2,r.pedido$))("ngIfElse",l)}},dependencies:[B,T,z,V,A,$,U,H,j,F,R],styles:[".detail-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;margin-bottom:2rem;flex-wrap:wrap}.btn-back[_ngcontent-%COMP%]{background:#34495e;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:600;min-height:44px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000001a;border-top:5px solid #d35400}.status-banner[_ngcontent-%COMP%]{padding:.8rem;text-align:center;font-weight:700;background:#f8f9fa;border-bottom:1px solid #eee}.status-banner.pendiente[_ngcontent-%COMP%]{color:#856404}.status-banner.en-proceso[_ngcontent-%COMP%]{color:#004085}.status-banner.producido[_ngcontent-%COMP%], .status-banner.terminado[_ngcontent-%COMP%]{color:#155724}.status-banner.cancelado[_ngcontent-%COMP%]{color:#c53030}.main-info[_ngcontent-%COMP%]{padding:2rem;text-align:center;background:#fffcf9}.qty[_ngcontent-%COMP%]{font-size:3rem;font-weight:900;color:#d35400;line-height:1}.product[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-top:.5rem}.talla-text[_ngcontent-%COMP%]{color:#e67e22;font-size:1.5rem;margin-left:10px}.relleno-box[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.2rem;color:#e67e22;background:#fff3e0;padding:.75rem 1.5rem;border-radius:8px;display:inline-block;border:2px solid #ffeaa7;font-weight:500}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;padding:1.5rem 2rem;border-top:1px solid #eee}.info-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#7f8c8d;text-transform:uppercase;font-weight:700;margin-bottom:.3rem}.vendedor-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background:#f0fdf4;color:#166534;padding:4px 10px;border-radius:6px;font-size:.9rem;font-weight:500}.vendedor-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#22c55e}.value[_ngcontent-%COMP%]{font-size:1.1rem;color:#2c3e50;font-weight:600}.highlight[_ngcontent-%COMP%]{font-size:1.4rem;color:#e74c3c}.notes-section[_ngcontent-%COMP%]{padding:0 2rem 1.5rem;display:flex;flex-direction:column;gap:1rem}.note-box[_ngcontent-%COMP%]{padding:1.2rem;border-radius:8px}.note-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase;margin-bottom:.5rem;display:block;opacity:.8}.note-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;line-height:1.4;font-weight:500}.note-box.pastelero[_ngcontent-%COMP%]{background:#fff9c4;color:#856404;border:1px dashed #fbc02d}.note-box.tienda[_ngcontent-%COMP%]{background:#f0f2f5;color:#555}.production-actions[_ngcontent-%COMP%]{padding:2rem;background:#fdfdfd;border-top:1px solid #eee}.btn-action[_ngcontent-%COMP%]{width:100%;padding:18px;border-radius:10px;border:none;font-weight:900;font-size:1.2rem;cursor:pointer;text-transform:uppercase;letter-spacing:1px;transition:transform .1s}.btn-action[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-action.start[_ngcontent-%COMP%]{background:#3498db;color:#fff;display:flex;align-items:center;justify-content:center;gap:10px}.btn-action.finish[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.btn-action[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed}.btn-cancel-link[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;margin-top:15px;background:none;border:1px solid #fab1a0;color:#e17055;border-radius:8px;font-weight:700;cursor:pointer}.btn-cancel-link[_ngcontent-%COMP%]:hover{background:#fff5f5;color:#d63031;border-color:#ff7675}.btn-cancel-link[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.done-message[_ngcontent-%COMP%]{text-align:center;color:#27ae60;font-weight:700;font-size:1.2rem;padding:1rem}.cancelled-message[_ngcontent-%COMP%]{text-align:center;color:#e17055;font-weight:700;font-size:1.2rem;padding:1rem;border:2px solid #fab1a0;border-radius:8px;background:#fff5f5}.metadata[_ngcontent-%COMP%]{padding:1rem 2rem;background:#f8f9fa;border-top:1px solid #eee;display:flex;justify-content:space-between;color:#95a5a6;font-size:.8rem}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:4rem;color:#666}@media (max-width: 768px){.detail-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{gap:1rem}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:1rem}.notes-section[_ngcontent-%COMP%]{padding:0 1rem 1rem}.production-actions[_ngcontent-%COMP%]{padding:1.5rem}.metadata[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}"]})};export{q as ObradorPedidoDetailComponent};
