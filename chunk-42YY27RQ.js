import{a as S}from"./chunk-XEJ54FTU.js";import{b as F,c,d as M,e as P,g as O,j as y,m as I,q as w,r as E}from"./chunk-264BU5W5.js";import{h as x}from"./chunk-Z77WTJM6.js";import{Aa as d,Ka as u,Na as s,Nb as h,Qa as i,Ra as o,Sa as p,Tb as _,Wa as f,Xa as b,Z as g,cb as a,eb as v,hb as C,za as m}from"./chunk-KPOQCY7D.js";function G(r,l){r&1&&(i(0,"div",11),a(1," Email v\xE1lido requerido "),o())}function L(r,l){if(r&1&&(i(0,"div",12),a(1),o()),r&2){let e=b();m(),v(" ",e.error," ")}}var N=class r{constructor(l,e,t){this.fb=l;this.authService=e;this.router=t;this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required]]})}loginForm;error=null;onSubmit(){if(this.loginForm.valid){let{email:l,password:e}=this.loginForm.value;this.authService.login(l,e).subscribe(t=>{if(t){let n=JSON.parse(localStorage.getItem("user")||"{}"),D=this.authService.getDefaultRoute(n.perfilId);this.router.navigate([D])}else this.error="Credenciales incorrectas"})}}static \u0275fac=function(e){return new(e||r)(d(w),d(S),d(x))};static \u0275cmp=g({type:r,selectors:[["app-login"]],standalone:!0,features:[C],decls:17,vars:4,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email"],["class","error",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],[1,"error"],[1,"error-message"]],template:function(e,t){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),a(3,"Pasteler\xEDa Arruti"),o(),i(4,"form",2),f("ngSubmit",function(){return t.onSubmit()}),i(5,"div",3)(6,"label",4),a(7,"Email"),o(),p(8,"input",5),u(9,G,2,0,"div",6),o(),i(10,"div",3)(11,"label",7),a(12,"Contrase\xF1a"),o(),p(13,"input",8),o(),u(14,L,2,1,"div",9),i(15,"button",10),a(16,"Iniciar Sesi\xF3n"),o()()()()),e&2){let n;m(4),s("formGroup",t.loginForm),m(5),s("ngIf",((n=t.loginForm.get("email"))==null?null:n.touched)&&((n=t.loginForm.get("email"))==null?null:n.invalid)),m(5),s("ngIf",t.error),m(),s("disabled",t.loginForm.invalid)}},dependencies:[_,h,E,O,F,M,P,y,I],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f5f5f5}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 6px #0000001a;width:100%;max-width:400px}h2[_ngcontent-%COMP%]{text-align:center;color:#3f51b5;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;min-height:44px}button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#3f51b5;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:1rem;min-height:44px}button[_ngcontent-%COMP%]:disabled{background-color:#ccc}.login-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible, .login-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3f51b5;outline-offset:2px}.error[_ngcontent-%COMP%]{color:red;font-size:.8rem;margin-top:.25rem}.error-message[_ngcontent-%COMP%]{color:red;margin-bottom:1rem;text-align:center}"]})};export{N as LoginComponent};
