import{a as f,b as h}from"./chunk-EAY7Z6F7.js";import{a as d,b as p,g as c,h as e,k as n,pa as l,q as u,qa as m,t as s}from"./chunk-II2SJXWV.js";var P=class a{http=s(m);adapter=s(f);apiUrl=h.apiUrl;getProductos(){return this.http.get(`${this.apiUrl}?type=productos`).pipe(e(r=>{if(r.status==="error")throw new Error(r.message||"Error al cargar los productos.");return this.adapter.adaptProductos(r)}),n(r=>(console.error("Error fetching productos:",r),c(()=>new Error("No se pudieron cargar los productos.")))))}getProductoById(r){return this.getProductos().pipe(e(t=>t.find(i=>i.id===r)))}addProducto(r){let t=p(d({},r),{id:crypto.randomUUID()}),i=p(d({},this.adapter.prepareProductoForPost(t)),{action:"addProduct"}),g=new l({"Content-Type":"text/plain;charset=utf-8"});return this.http.post(this.apiUrl,JSON.stringify(i),{headers:g}).pipe(e(o=>{if(o.status==="error")throw new Error(o.message||"Error al a\xF1adir el producto.");return o}),n(o=>(console.error("Error adding producto:",o),c(()=>new Error("No se pudo a\xF1adir el producto.")))))}static \u0275fac=function(t){return new(t||a)};static \u0275prov=u({token:a,factory:a.\u0275fac,providedIn:"root"})};export{P as a};
