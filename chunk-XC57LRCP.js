import{a as $}from"./chunk-2DOZQ56E.js";import"./chunk-BKTZ77TT.js";import{f as U,l as L}from"./chunk-MLTMCV35.js";import{$a as a,Fb as T,Hb as A,Ja as m,Jb as z,K as O,Kb as V,Lb as N,Ma as r,Mb as R,Pa as i,Qa as n,Ra as k,Ua as x,V as v,Va as _,Wa as c,Z as E,_a as S,ab as f,bb as l,eb as y,fa as b,ga as u,gb as C,ha as M,hb as w,ib as h,j as I,jb as D,q as P,ya as o}from"./chunk-ISGLS2OQ.js";function H(t,d){if(t&1&&(i(0,"span",28),a(1),n()),t&2){let e=c().ngIf;o(),l("(",e.talla,")")}}function j(t,d){if(t&1&&(i(0,"div",29),a(1," RELLENO: "),i(2,"strong"),a(3),n()()),t&2){let e=c().ngIf;o(3),f(e.relleno)}}function F(t,d){if(t&1&&(i(0,"div",14)(1,"label"),a(2,"Atendido por"),n(),i(3,"div",15)(4,"span",30),M(),i(5,"svg",31),k(6,"path",32)(7,"circle",33),n(),a(8),n()()()),t&2){let e=c().ngIf;o(8),l(" ",e.vendedor," ")}}function q(t,d){if(t&1&&(i(0,"div",34)(1,"label"),a(2,"Instrucciones de Obrador"),n(),i(3,"p"),a(4),n()()),t&2){let e=c().ngIf;o(4),f(e.notasPastelero)}}function Z(t,d){if(t&1&&(i(0,"div",35)(1,"label"),a(2,"Comentario de Tienda"),n(),i(3,"p"),a(4),n()()),t&2){let e=c().ngIf;o(4),f(e.notasTienda)}}function G(t,d){if(t&1){let e=x();i(0,"button",36),_("click",function(){b(e);let p=c().ngIf,g=c();return u(g.updateStatus(p.id,"En Proceso"))}),a(1),n()}if(t&2){let e=c(2);r("disabled",e.isUpdating),o(),l(" ",e.isUpdating?"Actualizando...":"COMENZAR PRODUCCI\xD3N"," ")}}function Y(t,d){if(t&1){let e=x();i(0,"button",37),_("click",function(){b(e);let p=c().ngIf,g=c();return u(g.updateStatus(p.id,"Terminado"))}),a(1),n()}if(t&2){let e=c(2);r("disabled",e.isUpdating),o(),l(" ",e.isUpdating?"Actualizando...":"TERMINAR Y LISTO PARA TIENDA"," ")}}function J(t,d){if(t&1){let e=x();i(0,"button",38),_("click",function(){b(e);let p=c().ngIf,g=c();return u(g.cancelarPedido(p))}),a(1," CANCELAR ESTA PIEZA "),n()}if(t&2){let e=c(2);r("disabled",e.isUpdating)}}function K(t,d){t&1&&(i(0,"div",39),a(1," Pedido finalizado por obrador \u2713 "),n())}function Q(t,d){t&1&&(i(0,"div",40),a(1," ESTE PEDIDO HA SIDO CANCELADO "),n())}function W(t,d){if(t&1&&(i(0,"div",5)(1,"div",6)(2,"div",7),a(3),n(),i(4,"div",8)(5,"div",9),a(6),n(),i(7,"div",10),a(8),m(9,H,2,1,"span",11),n(),m(10,j,4,1,"div",12),n(),i(11,"div",13)(12,"div",14)(13,"label"),a(14,"Cliente"),n(),i(15,"div",15),a(16),n()(),i(17,"div",14)(18,"label"),a(19,"Hora de Entrega"),n(),i(20,"div",16),a(21),C(22,"date"),n()(),m(23,F,9,1,"div",17),n(),i(24,"div",18),m(25,q,5,1,"div",19)(26,Z,5,1,"div",20),n(),i(27,"div",21),m(28,G,2,2,"button",22)(29,Y,2,2,"button",23)(30,J,2,1,"button",24)(31,K,2,0,"div",25)(32,Q,2,0,"div",26),n(),i(33,"div",27)(34,"small"),a(35),n(),i(36,"small"),a(37),C(38,"date"),n()()()()),t&2){let e=d.ngIf;o(2),r("ngClass",e.estado.toLowerCase().replace(" ","-")),o(),l(" Estado Actual: ",e.estado," "),o(3),l("",e.cantidad,"u."),o(2),l(" ",e.producto," "),o(),r("ngIf",e.talla),o(),r("ngIf",e.relleno),o(6),f(e.nombreCliente||"-"),o(5),f(h(22,18,e.fechaEntrega,"HH:mm")),o(2),r("ngIf",e.vendedor),o(2),r("ngIf",e.notasPastelero),o(),r("ngIf",e.notasTienda),o(2),r("ngIf",e.estado==="Pendiente"),o(),r("ngIf",e.estado==="En Proceso"),o(),r("ngIf",e.estado==="Pendiente"||e.estado==="En Proceso"),o(),r("ngIf",e.estado==="Terminado"||e.estado==="Entregado"),o(),r("ngIf",e.estado==="Cancelado"),o(3),l("ID: ",e.id,""),o(2),l("Entrega: ",h(38,21,e.fechaEntrega,"dd/MM/yyyy"),"")}}function X(t,d){t&1&&(i(0,"div",41),a(1,"Cargando datos de producci\xF3n..."),n())}var B=class t{route=v(U);location=v(T);productionService=v($);refresh$=new I(void 0);pedido$;isUpdating=!1;ngOnInit(){this.pedido$=this.refresh$.pipe(O(()=>this.route.paramMap),P(d=>d.get("id")),O(d=>d?this.productionService.getPedidos().pipe(P(e=>e.find(s=>s.id===d))):[void 0]))}cancelarPedido(d){confirm(`\xBFEst\xE1s seguro de que deseas CANCELAR este producto (${d.cantidad} ${d.producto})?`)&&this.updateStatus(d.id,"Cancelado")}updateStatus(d,e){this.isUpdating=!0,this.productionService.updatePedidoStatus(d,e).subscribe({next:()=>{this.isUpdating=!1,this.refresh$.next()},error:s=>{alert(s.message),this.isUpdating=!1}})}goBack(){this.location.back()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-pedido-obrador-detail"]],standalone:!0,features:[y],decls:10,vars:4,consts:[["loading",""],[1,"detail-container"],[1,"header"],[1,"btn-back",3,"click"],["class","content",4,"ngIf","ngIfElse"],[1,"content"],[1,"card"],[1,"status-banner",3,"ngClass"],[1,"main-info"],[1,"qty"],[1,"product"],["class","talla-text",4,"ngIf"],["class","relleno-box",4,"ngIf"],[1,"info-grid"],[1,"info-group"],[1,"value"],[1,"value","highlight"],["class","info-group",4,"ngIf"],[1,"notes-section"],["class","note-box pastelero",4,"ngIf"],["class","note-box tienda",4,"ngIf"],[1,"production-actions"],["class","btn-action start",3,"disabled","click",4,"ngIf"],["class","btn-action finish",3,"disabled","click",4,"ngIf"],["class","btn-cancel-link",3,"disabled","click",4,"ngIf"],["class","done-message",4,"ngIf"],["class","cancelled-message",4,"ngIf"],[1,"metadata"],[1,"talla-text"],[1,"relleno-box"],[1,"vendedor-badge"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"note-box","pastelero"],[1,"note-box","tienda"],[1,"btn-action","start",3,"click","disabled"],[1,"btn-action","finish",3,"click","disabled"],[1,"btn-cancel-link",3,"click","disabled"],[1,"done-message"],[1,"cancelled-message"],[1,"loading-state"]],template:function(e,s){if(e&1){let p=x();i(0,"div",1)(1,"div",2)(2,"button",3),_("click",function(){return b(p),u(s.goBack())}),a(3,"\u2190 Volver a Obrador"),n(),i(4,"h2"),a(5,"Control de Producci\xF3n"),n()(),m(6,W,39,24,"div",4),C(7,"async"),m(8,X,2,0,"ng-template",null,0,D),n()}if(e&2){let p=S(9);o(6),r("ngIf",w(7,2,s.pedido$))("ngIfElse",p)}},dependencies:[R,A,z,V,N,L],styles:[".detail-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;margin-bottom:2rem}.btn-back[_ngcontent-%COMP%]{background:#34495e;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:600}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000001a;border-top:5px solid #d35400}.status-banner[_ngcontent-%COMP%]{padding:.8rem;text-align:center;font-weight:700;background:#f8f9fa;border-bottom:1px solid #eee}.status-banner.pendiente[_ngcontent-%COMP%]{color:#856404}.status-banner.en-proceso[_ngcontent-%COMP%]{color:#004085}.status-banner.producido[_ngcontent-%COMP%], .status-banner.terminado[_ngcontent-%COMP%]{color:#155724}.status-banner.cancelado[_ngcontent-%COMP%]{color:#c53030}.main-info[_ngcontent-%COMP%]{padding:2rem;text-align:center;background:#fffcf9}.qty[_ngcontent-%COMP%]{font-size:3rem;font-weight:900;color:#d35400;line-height:1}.product[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-top:.5rem}.talla-text[_ngcontent-%COMP%]{color:#e67e22;font-size:1.5rem;margin-left:10px}.relleno-box[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.2rem;color:#e67e22;background:#fff3e0;padding:.75rem 1.5rem;border-radius:8px;display:inline-block;border:2px solid #ffeaa7;font-weight:500}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;padding:1.5rem 2rem;border-top:1px solid #eee}.info-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#7f8c8d;text-transform:uppercase;font-weight:700;margin-bottom:.3rem}.vendedor-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background:#f0fdf4;color:#166534;padding:4px 10px;border-radius:6px;font-size:.9rem;font-weight:500}.vendedor-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#22c55e}.value[_ngcontent-%COMP%]{font-size:1.1rem;color:#2c3e50;font-weight:600}.highlight[_ngcontent-%COMP%]{font-size:1.4rem;color:#e74c3c}.notes-section[_ngcontent-%COMP%]{padding:0 2rem 1.5rem;display:flex;flex-direction:column;gap:1rem}.note-box[_ngcontent-%COMP%]{padding:1.2rem;border-radius:8px}.note-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase;margin-bottom:.5rem;display:block;opacity:.8}.note-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;line-height:1.4;font-weight:500}.note-box.pastelero[_ngcontent-%COMP%]{background:#fff9c4;color:#856404;border:1px dashed #fbc02d}.note-box.tienda[_ngcontent-%COMP%]{background:#f0f2f5;color:#555}.production-actions[_ngcontent-%COMP%]{padding:2rem;background:#fdfdfd;border-top:1px solid #eee}.btn-action[_ngcontent-%COMP%]{width:100%;padding:18px;border-radius:10px;border:none;font-weight:900;font-size:1.2rem;cursor:pointer;text-transform:uppercase;letter-spacing:1px;transition:transform .1s}.btn-action[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-action.start[_ngcontent-%COMP%]{background:#3498db;color:#fff;display:flex;align-items:center;justify-content:center;gap:10px}.btn-action.finish[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.btn-action[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed}.btn-cancel-link[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;margin-top:15px;background:none;border:1px solid #fab1a0;color:#e17055;border-radius:8px;font-weight:700;cursor:pointer}.btn-cancel-link[_ngcontent-%COMP%]:hover{background:#fff5f5;color:#d63031;border-color:#ff7675}.done-message[_ngcontent-%COMP%]{text-align:center;color:#27ae60;font-weight:700;font-size:1.2rem;padding:1rem}.cancelled-message[_ngcontent-%COMP%]{text-align:center;color:#e17055;font-weight:700;font-size:1.2rem;padding:1rem;border:2px solid #fab1a0;border-radius:8px;background:#fff5f5}.metadata[_ngcontent-%COMP%]{padding:1rem 2rem;background:#f8f9fa;border-top:1px solid #eee;display:flex;justify-content:space-between;color:#95a5a6;font-size:.8rem}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:4rem;color:#666}"]})};export{B as PedidoObradorDetailComponent};
