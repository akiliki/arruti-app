import{P as n,j as i,m as s}from"./chunk-ISGLS2OQ.js";var d=class a{currentUserSubject=new i(null);currentUser$=this.currentUserSubject.asObservable();constructor(){let r=localStorage.getItem("user");r&&this.currentUserSubject.next(JSON.parse(r))}login(r,e){let o=[{email:"admin@arruti.eus",password:"Aitor12345",nombre:"Admin",perfilId:"admin"},{email:"joxe@arruti.eus",password:"Joxe12345",nombre:"Joxe",perfilId:"obrador-repo"},{email:"sonia@arruti.eus",password:"Sonia12345",nombre:"Sonia",perfilId:"tienda-repo"},{email:"amatza@arruti.eus",password:"Amatza12345",nombre:"Amatza",perfilId:"tienda-emp"},{email:"aitor@arruti.eus",password:"Aitor",nombre:"Aitor",perfilId:"obrador-emp"}].find(t=>t.email===r&&t.password===e);if(o){let t={id:Math.random().toString(36).substr(2,9),nombre:o.nombre,email:o.email,perfilId:o.perfilId,activo:!0};return localStorage.setItem("user",JSON.stringify(t)),this.currentUserSubject.next(t),s(!0)}return s(!1)}getDefaultRoute(r){switch(r){case"obrador-repo":case"obrador-emp":return"/obrador";case"tienda-repo":case"tienda-emp":return"/pedidos";case"admin":return"/pedidos";default:return"/pedidos"}}hasPermission(r,e){return({admin:["tienda","obrador","catalogo","seguridad"],"obrador-repo":["tienda","obrador","catalogo"],"tienda-repo":["tienda","catalogo"],"tienda-emp":["tienda"],"obrador-emp":["obrador"]}[r]||[]).includes(e)}logout(){localStorage.removeItem("user"),this.currentUserSubject.next(null)}isLoggedIn(){return!!this.currentUserSubject.value}static \u0275fac=function(e){return new(e||a)};static \u0275prov=n({token:a,factory:a.\u0275fac,providedIn:"root"})};export{d as a};
