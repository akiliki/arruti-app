import{a as A}from"./chunk-5XCCOOFA.js";import{a as E,b as g,c as F,d as y,f as O,i as N,j as I,n as R,o as k}from"./chunk-VMF2UI2V.js";import"./chunk-EPLH7U5S.js";import{$ as _,Ba as h,D as l,I as u,K as m,N as o,O as e,P as p,T as v,U as C,W as i,Y as f,na as x,qa as P,t as c,u as b,xa as S,ya as M}from"./chunk-3J4ERITL.js";function D(n,a){n&1&&(o(0,"div",12),i(1," La familia es obligatoria. "),e())}function G(n,a){n&1&&(o(0,"div",12),i(1," El nombre es obligatorio. "),e())}function T(n,a){if(n&1&&(o(0,"div",13),i(1),e()),n&2){let d=C();l(),f(" ",d.errorMessage," ")}}var w=class n{fb=c(R);productoService=c(A);router=c(S);isSubmitting=!1;errorMessage="";productForm=this.fb.group({familia:["",g.required],producto:["",g.required],tallasRaciones:[""]});onSubmit(){if(this.productForm.invalid)return;this.isSubmitting=!0,this.errorMessage="";let a=this.productForm.value,d=a.tallasRaciones?a.tallasRaciones.split(",").map(r=>r.trim()).filter(r=>r!==""):[],t={familia:a.familia||"",producto:a.producto||"",tallasRaciones:d};this.productoService.addProducto(t).subscribe({next:()=>{this.router.navigate(["/productos"])},error:r=>{this.isSubmitting=!1,this.errorMessage=r.message||"Error al guardar el producto."}})}static \u0275fac=function(d){return new(d||n)};static \u0275cmp=b({type:n,selectors:[["app-add-producto"]],standalone:!0,features:[_],decls:27,vars:6,consts:[[1,"form-container"],[1,"header"],["routerLink","/productos",1,"btn-back"],[1,"card",3,"ngSubmit","formGroup"],[1,"field"],["type","text","formControlName","familia","placeholder","Ej: Boller\xEDa, Pasteler\xEDa, Panes..."],["class","error",4,"ngIf"],["type","text","formControlName","producto","placeholder","Ej: Croissant de Mantequilla"],["type","text","formControlName","tallasRaciones","placeholder","Ej: Individual, 4p, 6p (separados por comas)"],[1,"actions"],["type","submit",1,"btn-save",3,"disabled"],["class","error-box",4,"ngIf"],[1,"error"],[1,"error-box"]],template:function(d,t){if(d&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),i(3,"A\xF1adir Nuevo Producto"),e(),o(4,"button",2),i(5,"Volver"),e()(),o(6,"form",3),v("ngSubmit",function(){return t.onSubmit()}),o(7,"div",4)(8,"label"),i(9,"Familia"),e(),p(10,"input",5),u(11,D,2,0,"div",6),e(),o(12,"div",4)(13,"label"),i(14,"Nombre del Producto"),e(),p(15,"input",7),u(16,G,2,0,"div",6),e(),o(17,"div",4)(18,"label"),i(19,"Raciones / Tama\xF1os (opcional)"),e(),p(20,"input",8),o(21,"small"),i(22,"Si hay varios, sep\xE1relos por comas."),e()(),o(23,"div",9)(24,"button",10),i(25),e()(),u(26,T,2,1,"div",11),e()()),d&2){let r,s;l(6),m("formGroup",t.productForm),l(5),m("ngIf",((r=t.productForm.get("familia"))==null?null:r.touched)&&((r=t.productForm.get("familia"))==null?null:r.invalid)),l(5),m("ngIf",((s=t.productForm.get("producto"))==null?null:s.touched)&&((s=t.productForm.get("producto"))==null?null:s.invalid)),l(8),m("disabled",t.productForm.invalid||t.isSubmitting),l(),f(" ",t.isSubmitting?"Guardando...":"Guardar Producto"," "),l(),m("ngIf",t.errorMessage)}},dependencies:[P,x,k,O,E,F,y,N,I,h,M],styles:[".form-container[_ngcontent-%COMP%]{padding:1rem;max-width:600px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 10px #0000001a}.field[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;flex-direction:column;gap:.4rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#444}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ddd;border-radius:4px}.field[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#888;font-size:.8rem}.error[_ngcontent-%COMP%]{color:#d32f2f;font-size:.8rem}.error-box[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background:#ffebee;color:#c62828;border-radius:4px}.actions[_ngcontent-%COMP%]{margin-top:2rem}.btn-save[_ngcontent-%COMP%]{width:100%;background:#2196f3;color:#fff;border:none;padding:1rem;border-radius:4px;cursor:pointer;font-weight:600;font-size:1rem}.btn-save[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.btn-back[_ngcontent-%COMP%]{background:transparent;border:1px solid #ddd;padding:.5rem 1rem;border-radius:4px;cursor:pointer}"]})};export{w as AddProductoComponent};
