import{a as N}from"./chunk-T6BMFCRC.js";import"./chunk-ORCUSZZD.js";import{Da as U,F as a,K as g,M as d,P as n,Q as t,U as x,V as v,W as c,X as E,Y as o,Z as m,_ as p,ba as S,d as M,da as C,ea as y,fa as h,ga as k,h as P,m as O,ma as w,na as D,pa as T,qa as z,ra as A,sa as V,t as u,u as I,xa as R,y as b,z as _}from"./chunk-ALWVHIEC.js";function $(i,r){if(i&1&&(n(0,"div",23)(1,"label"),o(2,"Instrucciones de Obrador"),t(),n(3,"p"),o(4),t()()),i&2){let e=c().ngIf;a(4),m(e.notasPastelero)}}function j(i,r){if(i&1&&(n(0,"div",24)(1,"label"),o(2,"Comentario de Tienda"),t(),n(3,"p"),o(4),t()()),i&2){let e=c().ngIf;a(4),m(e.notasTienda)}}function F(i,r){if(i&1){let e=x();n(0,"button",25),v("click",function(){b(e);let s=c().ngIf,f=c();return _(f.updateStatus(s.id,"En Proceso"))}),o(1),t()}if(i&2){let e=c(2);d("disabled",e.isUpdating),a(),p(" ",e.isUpdating?"Actualizando...":"COMENZAR PRODUCCI\xD3N"," ")}}function H(i,r){if(i&1){let e=x();n(0,"button",26),v("click",function(){b(e);let s=c().ngIf,f=c();return _(f.updateStatus(s.id,"Producido"))}),o(1),t()}if(i&2){let e=c(2);d("disabled",e.isUpdating),a(),p(" ",e.isUpdating?"Actualizando...":"TERMINAR Y LISTO PARA TIENDA"," ")}}function L(i,r){i&1&&(n(0,"div",27),o(1," Pedido finalizado por obrador \u2713 "),t())}function q(i,r){if(i&1&&(n(0,"div",5)(1,"div",6)(2,"div",7),o(3),t(),n(4,"div",8)(5,"div",9),o(6),t(),n(7,"div",10),o(8),t()(),n(9,"div",11)(10,"div",12)(11,"label"),o(12,"Cliente"),t(),n(13,"div",13),o(14),t()(),n(15,"div",12)(16,"label"),o(17,"Hora de Entrega"),t(),n(18,"div",14),o(19),C(20,"date"),t()()(),n(21,"div",15),g(22,$,5,1,"div",16)(23,j,5,1,"div",17),t(),n(24,"div",18),g(25,F,2,2,"button",19)(26,H,2,2,"button",20)(27,L,2,0,"div",21),t(),n(28,"div",22)(29,"small"),o(30),t(),n(31,"small"),o(32),C(33,"date"),t()()()()),i&2){let e=r.ngIf;a(2),d("ngClass",e.estado.toLowerCase().replace(" ","-")),a(),p(" Estado Actual: ",e.estado," "),a(3),p("",e.cantidad,"u."),a(2),m(e.producto),a(6),m(e.nombreCliente||"-"),a(5),m(h(20,13,e.fechaEntrega,"HH:mm")),a(3),d("ngIf",e.notasPastelero),a(),d("ngIf",e.notasTienda),a(2),d("ngIf",e.estado==="Pendiente"),a(),d("ngIf",e.estado==="En Proceso"),a(),d("ngIf",e.estado==="Producido"||e.estado==="Entregado"),a(3),p("ID: ",e.id,""),a(2),p("Entrega: ",h(33,16,e.fechaEntrega,"dd/MM/yyyy"),"")}}function Y(i,r){i&1&&(n(0,"div",28),o(1,"Cargando datos de producci\xF3n..."),t())}var B=class i{route=u(R);location=u(w);productionService=u(N);refresh$=new M(void 0);pedido$;isUpdating=!1;ngOnInit(){this.pedido$=this.refresh$.pipe(O(()=>this.route.paramMap),P(r=>r.get("id")),O(r=>r?this.productionService.getPedidos().pipe(P(e=>e.find(l=>l.id===r))):[void 0]))}updateStatus(r,e){this.isUpdating=!0,this.productionService.updatePedidoStatus(r,e).subscribe({next:()=>{this.isUpdating=!1,this.refresh$.next()},error:l=>{alert(l.message),this.isUpdating=!1}})}goBack(){this.location.back()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=I({type:i,selectors:[["app-pedido-obrador-detail"]],standalone:!0,features:[S],decls:10,vars:4,consts:[["loading",""],[1,"detail-container"],[1,"header"],[1,"btn-back",3,"click"],["class","content",4,"ngIf","ngIfElse"],[1,"content"],[1,"card"],[1,"status-banner",3,"ngClass"],[1,"main-info"],[1,"qty"],[1,"product"],[1,"info-grid"],[1,"info-group"],[1,"value"],[1,"value","highlight"],[1,"notes-section"],["class","note-box pastelero",4,"ngIf"],["class","note-box tienda",4,"ngIf"],[1,"production-actions"],["class","btn-action start",3,"disabled","click",4,"ngIf"],["class","btn-action finish",3,"disabled","click",4,"ngIf"],["class","done-message",4,"ngIf"],[1,"metadata"],[1,"note-box","pastelero"],[1,"note-box","tienda"],[1,"btn-action","start",3,"click","disabled"],[1,"btn-action","finish",3,"click","disabled"],[1,"done-message"],[1,"loading-state"]],template:function(e,l){if(e&1){let s=x();n(0,"div",1)(1,"div",2)(2,"button",3),v("click",function(){return b(s),_(l.goBack())}),o(3,"\u2190 Volver a Obrador"),t(),n(4,"h2"),o(5,"Control de Producci\xF3n"),t()(),g(6,q,34,19,"div",4),C(7,"async"),g(8,Y,2,0,"ng-template",null,0,k),t()}if(e&2){let s=E(9);a(6),d("ngIf",y(7,2,l.pedido$))("ngIfElse",s)}},dependencies:[V,D,T,z,A,U],styles:[".detail-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;margin-bottom:2rem}.btn-back[_ngcontent-%COMP%]{background:#34495e;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:600}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #0000001a;border-top:5px solid #d35400}.status-banner[_ngcontent-%COMP%]{padding:.8rem;text-align:center;font-weight:700;background:#f8f9fa;border-bottom:1px solid #eee}.status-banner.pendiente[_ngcontent-%COMP%]{color:#856404}.status-banner.en-proceso[_ngcontent-%COMP%]{color:#004085}.status-banner.producido[_ngcontent-%COMP%]{color:#155724}.main-info[_ngcontent-%COMP%]{padding:2rem;text-align:center;background:#fffcf9}.qty[_ngcontent-%COMP%]{font-size:3rem;font-weight:900;color:#d35400;line-height:1}.product[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#2c3e50;margin-top:.5rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;padding:1.5rem 2rem;border-top:1px solid #eee}.info-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#7f8c8d;text-transform:uppercase;font-weight:700;margin-bottom:.3rem}.value[_ngcontent-%COMP%]{font-size:1.1rem;color:#2c3e50;font-weight:600}.highlight[_ngcontent-%COMP%]{font-size:1.4rem;color:#e74c3c}.notes-section[_ngcontent-%COMP%]{padding:0 2rem 1.5rem;display:flex;flex-direction:column;gap:1rem}.note-box[_ngcontent-%COMP%]{padding:1.2rem;border-radius:8px}.note-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:700;text-transform:uppercase;margin-bottom:.5rem;display:block;opacity:.8}.note-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;line-height:1.4;font-weight:500}.note-box.pastelero[_ngcontent-%COMP%]{background:#fff9c4;color:#856404;border:1px dashed #fbc02d}.note-box.tienda[_ngcontent-%COMP%]{background:#f0f2f5;color:#555}.production-actions[_ngcontent-%COMP%]{padding:2rem;background:#fdfdfd;border-top:1px solid #eee}.btn-action[_ngcontent-%COMP%]{width:100%;padding:18px;border-radius:10px;border:none;font-weight:900;font-size:1.2rem;cursor:pointer;text-transform:uppercase;letter-spacing:1px;transition:transform .1s}.btn-action[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-action.start[_ngcontent-%COMP%]{background:#3498db;color:#fff;display:flex;align-items:center;justify-content:center;gap:10px}.btn-action.finish[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.btn-action[_ngcontent-%COMP%]:disabled{background:#bdc3c7;cursor:not-allowed}.done-message[_ngcontent-%COMP%]{text-align:center;color:#27ae60;font-weight:700;font-size:1.2rem;padding:1rem}.metadata[_ngcontent-%COMP%]{padding:1rem 2rem;background:#f8f9fa;border-top:1px solid #eee;display:flex;justify-content:space-between;color:#95a5a6;font-size:.8rem}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:4rem;color:#666}"]})};export{B as PedidoObradorDetailComponent};
