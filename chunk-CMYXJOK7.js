import{P as d}from"./chunk-CMV2EMBO.js";var c=class s{adaptPedidos(a){return a.data.map(t=>({id:t.id,idGrupo:t.id_grupo,producto:t.producto,talla:t.talla,relleno:t.relleno,cantidad:t.cantidad,fechaEntrega:this.parseDate(t.fecha),estado:this.mapEstado(t.estado_actual),fechaActualizacion:t.fecha_actualizacion?this.parseDate(t.fecha_actualizacion):void 0,nombreCliente:t.nombre_cliente,notasPastelero:t.notas_pastelero,notasTienda:t.notas_tienda,vendedor:t.vendedor,guardadoEnTienda:t.guardado_tienda===!0||t.guardado_tienda==="TRUE"||t.guardado_tienda==="SI"}))}parseDate(a){if(!a)return new Date;if(a instanceof Date)return a;let t=new Date(a);if(!isNaN(t.getTime()))return t;if(typeof a=="string"&&a.includes("/")){let n=a.split(" ")[0].split("/");if(n.length===3){let r=parseInt(n[0],10),e=parseInt(n[1],10)-1,o=parseInt(n[2],10),i=(a.split(" ")[1]||"00:00:00").split(":");return new Date(o,e,r,parseInt(i[0]||"0",10),parseInt(i[1]||"0",10),parseInt(i[2]||"0",10))}}return t}adaptProductos(a){return(a.data||[]).map(t=>{let n=[],r=t.raciones_tallas;if(r!=null){let e=String(r).trim();e!==""&&(n=e.split(/[,/;|]+/).map(o=>o.trim()).filter(o=>o!==""))}return{id:t.id_producto,familia:t.familia||"Sin Familia",producto:t.nombre||"Sin nombre",tallasRaciones:n,rellenos:t.rellenos?t.rellenos.split(/[,/;|]+/).map(e=>e.trim()).filter(e=>e!==""):[]}})}adaptRecetas(a){return(a.data||[]).map(t=>{let n=[];try{t.ingredientes&&String(t.ingredientes).startsWith("[")?n=JSON.parse(String(t.ingredientes)):t.ingredientes&&(n=[{nombre:String(t.ingredientes),cantidad:"",unidad:""}])}catch{n=[{nombre:String(t.ingredientes),cantidad:"",unidad:""}]}return{id:t.id,idProducto:t.id_producto,nombreProducto:t.nombre_producto,raciones:t.raciones,ingredientes:n,pasos:t.pasos,tiempoTotal:t.tiempo_total}})}prepareProductoForPost(a){return{id_producto:a.id,familia:a.familia,nombre:a.producto,raciones_tallas:a.tallasRaciones.join(", "),rellenos:a.rellenos.join(", ")}}prepareRecetaForPost(a){return{id:a.id,id_producto:a.idProducto,nombre_producto:a.nombreProducto,raciones:a.raciones,ingredientes:JSON.stringify(a.ingredientes),pasos:a.pasos,tiempo_total:a.tiempoTotal}}adaptStats(a){return a.stats?{totalPendientes:a.stats.pendientes??0,enHorno:a.stats.horno??0,producidosHoy:a.stats.producidos??0,entregadosHoy:a.stats.entregados??0}:{totalPendientes:0,enHorno:0,producidosHoy:0,entregadosHoy:0}}adaptEmpleados(a){return(a.data||[]).map(t=>({id:t.id,nombre:t.nombre,activo:!!t.activo}))}prepareForPost(a){return{id:a.id,id_grupo:a.idGrupo||"",producto:a.producto,talla:a.talla||"",relleno:a.relleno||"",cantidad:a.cantidad,fechaEntrega:a.fechaEntrega instanceof Date?a.fechaEntrega.toISOString():a.fechaEntrega,estado:a.estado||"Pendiente",nombre_cliente:a.nombreCliente||"",notas_pastelero:a.notasPastelero||"",notas_tienda:a.notasTienda||"",vendedor:a.vendedor||"",guardado_tienda:a.guardadoEnTienda?"SI":"NO"}}mapEstado(a){if(!a)return"Pendiente";switch(String(a).trim().toLowerCase()){case"pendiente":return"Pendiente";case"en proceso":case"en curso":case"horno":return"En Proceso";case"terminado":case"producido":case"finalizado":case"listo":return"Terminado";case"entregado":return"Entregado";case"cancelado":return"Cancelado";default:return"Pendiente"}}static \u0275fac=function(t){return new(t||s)};static \u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})};var g={production:!1,apiUrl:"https://script.google.com/macros/s/AKfycbyBIfvUKZMELIW8d43C243aN-9tYMuDqAY3-k2nmZXSYXMM8J6AlBm1sZdIf08HPE4B/exec"};export{c as a,g as b};
