import{a as q}from"./chunk-GBLNJP7S.js";import{a as H}from"./chunk-POPWOB4M.js";import{a as z}from"./chunk-UWCFH2GT.js";import"./chunk-CMYXJOK7.js";import{e as A,g as B,h as L,k as j}from"./chunk-PY7FXQZV.js";import{Ka as l,Na as s,Nb as F,Oa as O,Ob as N,Pa as h,Pb as D,Qa as n,Ra as o,Sa as S,Tb as R,Ub as V,V as m,Va as k,Wa as E,Wb as $,Xa as c,Z as v,bb as I,cb as i,db as g,eb as b,ga as P,ha as M,hb as y,ib as T,lb as u,m as x,mb as f,nb as w,pb as U,q as _,y as C,za as d}from"./chunk-CMV2EMBO.js";var Q=()=>["/pedidos"];function W(e,a){if(e&1&&(n(0,"div",5)(1,"label"),i(2,"Atendido por:"),o(),n(3,"strong"),i(4),o()()),e&2){let t=c().ngIf;d(4),g(t.vendedor)}}function X(e,a){if(e&1){let t=k();n(0,"button",12),u(1,"pedidoStatusClass"),E("click",function(){let p=P(t).$implicit,J=c().ngIf,K=c();return M(K.updateStatus(J.id,p))}),i(2),o()}if(e&2){let t=a.$implicit,r=c().ngIf,p=c();h("btn-status "+f(1,6,t)),O("active",r.estado===t),s("disabled",p.updating||r.estado===t),d(2),b(" ",t," ")}}function Y(e,a){if(e&1&&(n(0,"div",13),i(1),o()),e&2){let t=c(2);d(),b(" ",t.errorMessage," ")}}function Z(e,a){if(e&1&&(n(0,"div",2),S(1,"app-pedidos-header",3),n(2,"div",4)(3,"div",5)(4,"label"),i(5,"Producto:"),o(),n(6,"span"),i(7),o()(),n(8,"div",5)(9,"label"),i(10,"Cantidad:"),o(),n(11,"span"),i(12),o()(),n(13,"div",5)(14,"label"),i(15,"Fecha de Entrega:"),o(),n(16,"span"),i(17),u(18,"date"),o()(),l(19,W,5,1,"div",6),n(20,"div",5)(21,"label"),i(22,"Estado Actual:"),o(),n(23,"span",7),u(24,"pedidoStatusClass"),i(25),o()()(),n(26,"div",8)(27,"h3"),i(28,"Cambiar Estado a:"),o(),n(29,"div",9),l(30,X,3,8,"button",10),o()(),l(31,Y,2,1,"div",11),o()),e&2){let t=a.ngIf,r=c();d(),s("title","Pedido: "+t.id)("backLink",T(15,Q)),d(6),g(t.producto),d(5),g(t.cantidad),d(5),g(w(18,10,t.fechaEntrega,"dd/MM/yyyy")),d(2),s("ngIf",t.vendedor),d(4),s("ngClass",f(24,13,t.estado)),d(2),b(" ",t.estado," "),d(5),s("ngForOf",r.estados),d(),s("ngIf",r.errorMessage)}}function tt(e,a){e&1&&(n(0,"div",16),i(1,"Cargando pedido..."),o())}function et(e,a){if(e&1&&(n(0,"div",17)(1,"p"),i(2),o(),n(3,"button",18),i(4,"Volver a la lista"),o()()),e&2){let t=c(2);d(2),g(t.error)}}function nt(e,a){if(e&1&&l(0,tt,2,0,"div",14)(1,et,5,1,"div",15),e&2){let t=c();s("ngIf",!t.error),d(),s("ngIf",t.error)}}var G=class e{route=m(A);router=m(B);productionService=m(z);pedido$;estados=["Pendiente","En Proceso","Terminado","Entregado","Cancelado"];updating=!1;error=null;errorMessage=null;ngOnInit(){let a=this.route.snapshot.paramMap.get("id");if(!a){this.error="No se proporcion\xF3 un ID de pedido.";return}this.pedido$=this.productionService.getPedidos().pipe(_(t=>{let r=t.find(p=>p.id===a);if(!r)throw new Error("Pedido no encontrado.");return r}),C(t=>(this.error=t.message,x())))}updateStatus(a,t){this.updating=!0,this.errorMessage=null,this.productionService.updatePedidoStatus(a,t).subscribe({next:()=>{this.updating=!1,this.router.navigate(["/pedidos"])},error:r=>{this.errorMessage=r.message,this.updating=!1}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-tienda-update-status"]],standalone:!0,features:[y],decls:4,vars:4,consts:[["loading",""],["class","status-container",4,"ngIf","ngIfElse"],[1,"status-container"],["backText","\u2190 Volver",3,"title","backLink"],[1,"order-card"],[1,"detail"],["class","detail",4,"ngIf"],[1,"badge",3,"ngClass"],[1,"status-actions"],[1,"btn-group"],[3,"class","active","disabled","click",4,"ngFor","ngForOf"],["class","error-alert",4,"ngIf"],[3,"click","disabled"],[1,"error-alert"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"loading-state"],[1,"error-state"],["routerLink","/pedidos"]],template:function(t,r){if(t&1&&(l(0,Z,32,16,"div",1),u(1,"async"),l(2,nt,2,2,"ng-template",null,0,U)),t&2){let p=I(3);s("ngIf",f(1,2,r.pedido$))("ngIfElse",p)}},dependencies:[$,F,N,D,R,V,j,L,H,q],styles:[".status-container[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:20px;flex-wrap:wrap}.btn-back[_ngcontent-%COMP%]{background:none;border:none;color:#d35400;cursor:pointer;font-weight:700;min-height:44px}.order-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-radius:8px;padding:20px;margin-bottom:30px;box-shadow:0 2px 4px #0000000d}.detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee}.detail[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#666}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:.9rem;font-weight:700}.badge.pendiente[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.badge.en-proceso[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.badge.producido[_ngcontent-%COMP%], .badge.terminado[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.entregado[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.badge.cancelado[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.status-actions[_ngcontent-%COMP%]{text-align:center}.btn-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin-top:15px;flex-wrap:wrap}.btn-status[_ngcontent-%COMP%]{padding:12px 20px;border-radius:6px;border:2px solid transparent;cursor:pointer;font-weight:700;transition:all .2s;min-height:44px}.btn-status.pendiente[_ngcontent-%COMP%]{border-color:#ffe69c;color:#856404}.btn-status.pendiente[_ngcontent-%COMP%]:hover:not(:disabled){background:#fff3cd}.btn-status.pendiente.active[_ngcontent-%COMP%]{background:#fff3cd;border-color:#856404}.btn-status.en-proceso[_ngcontent-%COMP%]{border-color:#b8daff;color:#004085}.btn-status.en-proceso[_ngcontent-%COMP%]:hover:not(:disabled){background:#cce5ff}.btn-status.en-proceso.active[_ngcontent-%COMP%]{background:#cce5ff;border-color:#004085}.btn-status.producido[_ngcontent-%COMP%], .btn-status.terminado[_ngcontent-%COMP%]{border-color:#c3e6cb;color:#155724}.btn-status.producido[_ngcontent-%COMP%]:hover:not(:disabled), .btn-status.terminado[_ngcontent-%COMP%]:hover:not(:disabled){background:#d4edda}.btn-status.producido.active[_ngcontent-%COMP%], .btn-status.terminado.active[_ngcontent-%COMP%]{background:#d4edda;border-color:#155724}.btn-status.entregado[_ngcontent-%COMP%]{border-color:#d6d8db;color:#383d41}.btn-status.entregado[_ngcontent-%COMP%]:hover:not(:disabled){background:#e2e3e5}.btn-status.entregado.active[_ngcontent-%COMP%]{background:#e2e3e5;border-color:#383d41}.btn-status.cancelado[_ngcontent-%COMP%]{border-color:#f5c6cb;color:#721c24}.btn-status.cancelado[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8d7da}.btn-status.cancelado.active[_ngcontent-%COMP%]{background:#f8d7da;border-color:#721c24}.btn-status[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{padding:40px;text-align:center}.error-alert[_ngcontent-%COMP%]{margin-top:20px;padding:15px;background:#f8d7da;color:#721c24;border-radius:4px;text-align:center}.btn-back[_ngcontent-%COMP%]:focus-visible, .btn-status[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}@media (max-width: 640px){.status-container[_ngcontent-%COMP%]{padding:12px}.detail[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:6px}}"]})};export{G as TiendaUpdateStatusComponent};
