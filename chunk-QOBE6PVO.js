import{a as F,b as s,c as I,d as N,f as O,g as A,i as T,j as k,n as D,o as G}from"./chunk-EMFWQ2AM.js";import{a as y}from"./chunk-GMV6DHHB.js";import{C as r,H as p,J as l,M as n,N as e,O as f,S as _,T as v,V as o,X as b,Z as C,ka as P,na as h,s as g,t as x,ua as E,va as M,xa as S}from"./chunk-7CFEW4HV.js";function R(t,a){t&1&&(n(0,"div",15),o(1," El nombre del producto es obligatorio. "),e())}function V(t,a){t&1&&(n(0,"div",15),o(1," Ingrese una cantidad v\xE1lida (m\xEDnimo 1). "),e())}function q(t,a){t&1&&(n(0,"div",15),o(1," La fecha de entrega es obligatoria. "),e())}function L(t,a){if(t&1&&(n(0,"div",16),o(1),e()),t&2){let d=v();r(),b(" ",d.successMessage," ")}}function j(t,a){if(t&1&&(n(0,"div",17),o(1),e()),t&2){let d=v();r(),b(" ",d.errorMessage," ")}}var w=class t{fb=g(D);productionService=g(y);router=g(E);submitting=!1;successMessage="";errorMessage="";pedidoForm=this.fb.group({producto:["",s.required],cantidad:[1,[s.required,s.min(1)]],fechaEntrega:[new Date().toISOString().split("T")[0],s.required],estado:["Pendiente"]});onSubmit(){if(this.pedidoForm.invalid)return;this.submitting=!0,this.errorMessage="";let a=this.pedidoForm.value;this.productionService.addPedido(a).subscribe({next:()=>{this.successMessage="Pedido guardado correctamente. Redirigiendo...",setTimeout(()=>this.router.navigate(["/"]),2e3)},error:d=>{this.errorMessage=d.message,this.submitting=!1}})}static \u0275fac=function(d){return new(d||t)};static \u0275cmp=x({type:t,selectors:[["app-add-pedido"]],standalone:!0,features:[C],decls:26,vars:8,consts:[[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","producto"],["id","producto","type","text","formControlName","producto","placeholder","Ej: Tarta de Queso"],["class","error",4,"ngIf"],["for","cantidad"],["id","cantidad","type","number","formControlName","cantidad"],["for","fechaEntrega"],["id","fechaEntrega","type","date","formControlName","fechaEntrega"],[1,"actions"],["type","button","routerLink","/",1,"btn-secondary"],["type","submit",1,"btn-primary",3,"disabled"],["class","success-alert",4,"ngIf"],["class","error-alert",4,"ngIf"],[1,"error"],[1,"success-alert"],[1,"error-alert"]],template:function(d,i){if(d&1&&(n(0,"div",0)(1,"h2"),o(2,"A\xF1adir Nuevo Pedido"),e(),n(3,"form",1),_("ngSubmit",function(){return i.onSubmit()}),n(4,"div",2)(5,"label",3),o(6,"Producto"),e(),f(7,"input",4),p(8,R,2,0,"div",5),e(),n(9,"div",2)(10,"label",6),o(11,"Cantidad"),e(),f(12,"input",7),p(13,V,2,0,"div",5),e(),n(14,"div",2)(15,"label",8),o(16,"Fecha de Entrega"),e(),f(17,"input",9),p(18,q,2,0,"div",5),e(),n(19,"div",10)(20,"button",11),o(21,"Cancelar"),e(),n(22,"button",12),o(23),e()()(),p(24,L,2,1,"div",13)(25,j,2,1,"div",14),e()),d&2){let m,c,u;r(3),l("formGroup",i.pedidoForm),r(5),l("ngIf",((m=i.pedidoForm.get("producto"))==null?null:m.invalid)&&((m=i.pedidoForm.get("producto"))==null?null:m.touched)),r(5),l("ngIf",((c=i.pedidoForm.get("cantidad"))==null?null:c.invalid)&&((c=i.pedidoForm.get("cantidad"))==null?null:c.touched)),r(5),l("ngIf",((u=i.pedidoForm.get("fechaEntrega"))==null?null:u.invalid)&&((u=i.pedidoForm.get("fechaEntrega"))==null?null:u.touched)),r(4),l("disabled",i.pedidoForm.invalid||i.submitting),r(),b(" ",i.submitting?"Guardando...":"Guardar Pedido"," "),r(),l("ngIf",i.successMessage),r(),l("ngIf",i.errorMessage)}},dependencies:[h,P,G,O,F,A,I,N,T,k,S,M],styles:[".form-container[_ngcontent-%COMP%]{max-width:500px;margin:20px auto;padding:20px;border:1px solid #ddd;border-radius:8px;background:#fff}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.error[_ngcontent-%COMP%]{color:red;font-size:.8rem;margin-top:4px}.actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:20px}button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:4px;cursor:pointer;border:none}.btn-primary[_ngcontent-%COMP%]{background:#d35400;color:#fff}.btn-primary[_ngcontent-%COMP%]:disabled{background:#ccc}.btn-secondary[_ngcontent-%COMP%]{background:#eee}.success-alert[_ngcontent-%COMP%]{margin-top:15px;padding:10px;background:#d4edda;color:#155724;border-radius:4px}.error-alert[_ngcontent-%COMP%]{margin-top:15px;padding:10px;background:#f8d7da;color:#721c24;border-radius:4px}"]})};export{w as AddPedidoComponent};
